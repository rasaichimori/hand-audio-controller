import { Transaction } from '../../../gen/audiotool/document/v1/document_service_pb';
import { WasmDocumentState } from './wasm';

/**
 * This class can be used to "consolidate" two transaction histories in such a way that
 * they reach the same document state.
 *
 * It assumes two document states, a "local" one for which
 * transactions are "created", and a "remote" one for which transactions are "received". Calling
 * {@link consolidate} on newly created and received transaction will return a list of transactions
 * which, if applied to the local document, will make it match the "remote" document state -
 * plus created-but-not-yet-confirmed transactions.
 */
export declare class NexusStateConsolidator {
    #private;
    constructor(state: WasmDocumentState);
    /**
     * Consolidate the local and remote transaction history.
     *
     * @param newReceived Newly received transaction from the remote
     * @param newReceivedRejected Newly received transaction rejections from the remote. **must be a subset of previously created transactions**
     * @param newCreated Newly created transactions on the local document
     * @returns Transactions needed to sync local & remote, plus transactions created but not yet received
     */
    consolidate(
    /** new transactions received from the document service since the last time `synchronize` was called */
    newReceived: Transaction[], 
    /** new rejected transactions received from the document service. Must be a subset of `newOutgoing`. */
    newReceivedRejected: Set<string>, 
    /** new locally created transactions */
    newCreated: Transaction[]): Transaction[];
}
