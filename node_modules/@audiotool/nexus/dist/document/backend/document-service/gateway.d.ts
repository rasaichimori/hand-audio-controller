import { Transaction } from '../../../gen/audiotool/document/v1/document_service_pb';
import { ObservableValue } from '../../../utils/observable-notifier-value';
import { NexusGateway } from '../gateway';
import { WasmDocumentState } from './wasm';
import { DocumentServiceWrapper } from './wrapper/wrapper';

/** A gateway that is connected to some collab backend that might:
 * * reject transaction
 * * reorder transactions
 * * interleave transactions with transactions of other clients
 */
export declare class CollabGateway implements NexusGateway {
    #private;
    /**
     * Some stats, useful for debugging.
     */
    static readonly stats: {
        numReceivedCtr: number;
        numConfirmedCtr: number;
        numQueuedCtr: number;
        numRejectedCtr: number;
    };
    readonly blocked: ObservableValue<boolean>;
    constructor({ documentService, state, logOutgoingTransactions, logIncomingTransactions, logConsolidatedTransactions, logRejectedTransactions, }: {
        documentService: DocumentServiceWrapper;
        state: WasmDocumentState;
        logOutgoingTransactions?: boolean;
        logIncomingTransactions?: boolean;
        logConsolidatedTransactions?: boolean;
        logRejectedTransactions?: boolean;
    });
    /** Send a transaction to the document service. */
    send(t: Transaction): void;
    /** Receive new transactions from the backend, already consolidated with the local change history.*/
    synchronize(): Transaction[];
}
