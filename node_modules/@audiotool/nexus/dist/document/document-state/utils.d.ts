import { NexusEntity } from '../entity';
import { PrimitiveType } from '../fields';
import { NexusLocation } from '../location';
import { NexusObject } from '../object';

/** removes a source/target pair from a reference map, cleaning up in the process */
export declare const removeSourceTarget: (references: Map<NexusLocation, NexusLocation[]>, source: NexusLocation, target: NexusLocation) => boolean;
/** Adds a source/target pair to a reference map */
export declare const addSourceTarget: (references: Map<NexusLocation, NexusLocation[]>, source: NexusLocation, target: NexusLocation) => void;
/** Function that calls a `visit` function on every pointer field of a nexus object/entity */
export declare const visitPointers: (obj: NexusObject, visit: (from: NexusLocation, to: NexusLocation) => void) => void;
/** Update a nexus field. Resolves the field and calls start/stop pointing
 * to at the right time if the value is a NexusLocation.
 */
export declare const applyUpdate: <P extends PrimitiveType>(entity: NexusEntity, location: NexusLocation, value: P, callbacks?: {
    /** Called if the update is on a NexusLocation & causes a pointer field to point to something */
    onStartPointingTo(from: NexusLocation, to: NexusLocation): void;
    /** Called if the update is on a NexusLocation & causes a pointer field to stop pointing to something */
    onStopPointingTo(from: NexusLocation, to: NexusLocation): void;
}) => void;
