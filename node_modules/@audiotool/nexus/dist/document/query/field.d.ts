import { TargetType } from '../../gen/audiotool/document/v1/opt/opt_pb';
import { AsyncLock } from '../../utils/async-lock';
import { PrimitiveType, PrimitiveField, NexusField } from '../fields';
import { NexusLocation } from '../location';

export declare class FieldQuery<T extends NexusField | PrimitiveField<PrimitiveType>> {
    #private;
    constructor({ getFields, getRefs, filterFields, documentLock, }: {
        getFields: () => ReadonlyArray<NexusField>;
        getRefs: () => ReadonlyMap<NexusLocation, NexusLocation[]>;
        filterFields: (location: NexusField) => boolean;
        documentLock: AsyncLock | undefined;
    });
    /** Only keep fields that are marked with target type appearing in `targetTypes`. */
    ofTargetTypes(...targetTypes: (keyof typeof TargetType)[]): FieldQuery<T>;
    /** Only keep fields that aren't pointed to by any other field in the nexus document. */
    notPointedTo(): FieldQuery<T>;
    pointedToBy(location: NexusLocation): FieldQuery<T>;
    primitiveFields(): FieldQuery<PrimitiveField<PrimitiveType>>;
    /** Returns all primitive fields selected using this query */
    get(): T[];
    /** Returns the first primitive field of the result, or undefined if the query is empty.
     */
    getOne(): T | undefined;
    /** Returns all primitive fields selected using this query, as
     * part of a ComparableMap that maps entity ids to fields for that entity.
     */
    getByEntity(): Map<string, T[]>;
}
