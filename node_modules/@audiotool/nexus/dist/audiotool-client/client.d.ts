import { AudiotoolAPI } from './api';
import { SyncedDocument } from './synced-document';

export type { SyncedDocument };
/**
 * Main client interface for the Audiotool Nexus SDK.
 *
 * Provides access to document creation, authentication management, and all Audiotool API services.
 * The client consolidates all SDK functionality into a single, easy-to-use interface.
 */
export type AudiotoolClient = {
    /**
     * Create a synced document instance for real-time collaboration.
     *
     * **NOTE:** Can currently only create one synced document per tab.
     *
     * @param opts Configuration for the document connection
     * @returns Promise resolving to a SyncedDocument instance
     */
    createSyncedDocument: (opts: {
        /** Run in online mode, which means the document state is synced in real time. */
        mode: "online";
        /** The project to sync to; this can be anything containing a project's UUID, e.g. the URL of the studio
         * when the project is open in the browser.
         */
        project: string;
    } | {
        /** Run in offline mode, i.e. not synced to any particular project.
         *
         * All changes are discarded on reload.
         */
        mode: "offline";
        /** Whether transaction validation is on. If off, fewer transaction errors will occur,
         * but the document might not get accepted by the backend if connecting to a project.
         */
        validated: boolean;
    }) => Promise<SyncedDocument>;
    /**
     * Collection of Audiotool API service clients.
     *
     * Provides access to all Audiotool services including projects, users, samples, presets, and more.
     * All services use retrying clients that handle network issues gracefully.
     */
    api: AudiotoolAPI;
};
/**
 * Create the main Audiotool client instance.
 *
 * This is the primary entry point for the Audiotool Nexus SDK. The client provides
 * access to document creation, authentication management, and all Audiotool API services
 * in a single, unified interface.
 *
 * @example
 * ```typescript
 * // Basic setup
 * import { createAudiotoolClient } from "@audiotool/nexus";
 *
 * const client = await createAudiotoolClient({token: "at_pat_your_token_here"});
 *
 * // Connect to an online project
 * const document = await client.createSyncedDocument({
 *   mode: "online",
 *   project: "https://beta.audiotool.com/studio?project=abc123"
 * });
 *
 * await document.start();
 * ```
 *
 * @example API usage
 * ```typescript
 * // Access API services
 * const client = await createAudiotoolClient({token: "at_pat_your_token_here"});
 *
 * // List projects
 * const projects = await client.api.projectService.listProjects({});
 * ```
 *
 * @example Offline mode
 *
 * In offline mode, the document isn't stored, and all changes are discarded on reload.
 *
 * ```typescript
 * // Offline development
 * const client = await createAudiotoolClient({token: "blank"});
 *
 * const document = await client.createSyncedDocument({
 *   mode: "offline",
 *   validated: true  // Enable validation for realistic behavior
 * });
 *
 * await document.start();
 *
 * // Create entities locally
 * await document.modify((t) => {
 *   const delay = t.create("stompboxDelay", {
 *     feedbackFactor: 0.4
 *   });
 *   return delay;
 * });
 * ```
 *
 *
 * @throws {Error} When API initialization fails
 *
 * @see {@link AudiotoolClient} for the client interface
 * @see {@link SyncedDocument} for document manipulation
 * @see {@link AudiotoolAPI} for available API services
 */
export declare const createAudiotoolClient: ({ authorization: authorization, }: {
    /**
     * The token provider used to generate authorization tokens to authenticate against the API.
     *
     * This could be:
     * * the return value of {@link getLoginStatus}, if it returns the user is logged in
     * * a constant authorization token as a string (e.g. the PAT from https://developer.audiotool.com/personal-access-tokens)
     * */
    authorization: string | {
        getToken: () => Promise<string | Error>;
    };
}) => Promise<AudiotoolClient>;
export declare const extractProjectName: (project: string) => string;
