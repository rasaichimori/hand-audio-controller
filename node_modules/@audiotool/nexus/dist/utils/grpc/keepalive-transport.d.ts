import { IMessageTypeRegistry } from '@bufbuild/protobuf';
import { Transport } from '@connectrpc/connect';
import { Brand } from 'utility-types';
import { RetryOptions } from './retrying-client';

export declare const KEEPALIVE_HEADER = "###keepalive###";
/** A transport that can send gRPC requests that are "kept alive" after
 * page unloads by passing in a special header to the gRPC method, namely:
 *
 * ```ts
 * {
 *  ["###keepalive###"]: "true"
 * }
 * ```
 *
 * This header will not be passed to the `fetch` function as a header, instead
 * it will be extracted and used to determine the keepalive option for fetch.
 */
export type KeepaliveTransport = Brand<Transport, "keepalive">;
export declare const createAuthorizedKeepaliveTransport: ({ baseUrl, useBinaryFormat, typeRegistry, getToken, }: {
    baseUrl: string;
    useBinaryFormat: boolean;
    typeRegistry?: IMessageTypeRegistry;
    getToken: () => Promise<string>;
}) => KeepaliveTransport;
/** Takes the `keepalive` parameter out of `options`, packs it into the
 * keepalive header.
 */
export declare const packRetryingOptions: (options?: RetryOptions) => RetryOptions | undefined;
/** Doing the thing from above, but in reverse.  */
export declare const unpackHeader: (headers?: HeadersInit) => {
    headers: Headers;
    keepalive: boolean;
};
