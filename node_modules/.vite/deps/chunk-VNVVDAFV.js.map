{
  "version": 3,
  "sources": ["../../@audiotool/nexus/dist/observable-notifier-value-BmUQV8XP.js", "../../@audiotool/nexus/dist/lang-KJQpoj7q.js"],
  "sourcesContent": ["var v = (r) => {\n  throw TypeError(r);\n};\nvar M = (r, e, t) => e.has(r) || v(\"Cannot \" + t);\nvar s = (r, e, t) => (M(r, e, \"read from private field\"), t ? t.call(r) : e.get(r)), h = (r, e, t) => e.has(r) ? v(\"Cannot add the same private member more than once\") : e instanceof WeakSet ? e.add(r) : e.set(r, t), u = (r, e, t, i) => (M(r, e, \"write to private field\"), i ? i.call(r, t) : e.set(r, t), t);\nconst E = async (r, e) => {\n  try {\n    return await fetch(r, e);\n  } catch (t) {\n    return new Error(\"error during fetch\", { cause: t });\n  }\n};\nvar l, m, f;\nclass T {\n  /** if `warnAfterMs` is set, the lock will emit a warning if a call to `lock.aquire()\n   * tok more than `warnAfterMs` milliseconds.\n   */\n  constructor(e) {\n    h(this, l, !1);\n    h(this, m, []);\n    h(this, f);\n    u(this, f, (e == null ? void 0 : e.warnAfterMs) ?? void 0);\n  }\n  /**\n   * Wait until no other async thread holds a lock, then returns a lock.\n   *\n   * Once the lock is held, all other threads that call `acquire()` will have to wait until\n   * the lock is released.\n   *\n   *\n   * Release the lock with `lock.release()`.\n   *\n   * Example:\n   * ```ts\n   * const lock = new AsyncLock()\n   * ...\n   * const l = await lock.acquire()\n   * // do stuff\n   * l.release()\n   * ```\n   *\n   */\n  async acquire() {\n    let e = () => {\n    };\n    s(this, f) !== void 0 && (e = k(\n      s(this, f),\n      `Waited for lock.aquire() for more than ${s(this, f)} ms, deadlock?`\n    )), s(this, l) && await new Promise((i) => s(this, m).push(i)), e(), u(this, l, !0);\n    let t = !1;\n    return {\n      release: () => {\n        var i;\n        if (t)\n          throw new Error(\"Lock already released\");\n        t = !0, s(this, m).length > 0 ? (i = s(this, m).shift()) == null || i() : u(this, l, !1);\n      }\n    };\n  }\n  /**\n   * Execute a function after acquiring a lock, and release the lock after the function is done.\n   *\n   * Example:\n   * ```ts\n   * const v = await lock.runAcquired(() => {\n   *  // do something\n   *  return 42\n   * })\n   * ```\n   *\n   * This function is **safe against exceptions**. If the function throws an exception, the lock\n   * is released before the exception is thrown.\n   *\n   */\n  async runAcquired(e) {\n    const t = await this.acquire();\n    let i;\n    try {\n      return i = await e(), t.release(), i;\n    } catch (S) {\n      throw t.release(), S;\n    }\n  }\n  /** Weather the lock is currently taken. Because javascript is single-threaded, it is safe\n   * to do e.g.:\n   * ```ts\n   * if (!lock.locked) {\n   *   lock.acquire()\n   *   // do something\n   *   lock.release()\n   * }\n   *\n   * ```\n   *\n   * without `await`ing the `lock.acquire()`.\n   */\n  get locked() {\n    return s(this, l);\n  }\n}\nl = new WeakMap(), m = new WeakMap(), f = new WeakMap();\nconst k = (r, e) => {\n  const t = setTimeout(() => {\n    console.warn(e), console.trace(\"Waited here:\");\n  }, r);\n  return () => clearTimeout(t);\n};\nvar d;\nclass A {\n  constructor() {\n    h(this, d, /* @__PURE__ */ new Set());\n  }\n  // A set allows us to remove while iterating\n  subscribe(e) {\n    return s(this, d).add(e), { terminate: () => s(this, d).delete(e) };\n  }\n  notify(e) {\n    s(this, d).forEach((t) => t(e));\n  }\n  terminate() {\n    s(this, d).clear();\n  }\n}\nd = new WeakMap();\nconst w = Symbol();\nvar a;\nclass N {\n  constructor() {\n    /** Maps the hash of a key to both key and value */\n    h(this, a, /* @__PURE__ */ new Map());\n  }\n  clear() {\n    s(this, a).clear();\n  }\n  delete(e) {\n    const t = e[w];\n    return s(this, a).delete(t);\n  }\n  forEach(e, t) {\n    s(this, a).forEach(([i, S]) => {\n      e(S, i, this);\n    }, t);\n  }\n  entries() {\n    return s(this, a).entries().map(([e, [t, i]]) => [t, i]);\n  }\n  get(e) {\n    var t;\n    return (t = s(this, a).get(e[w])) == null ? void 0 : t[1];\n  }\n  has(e) {\n    return s(this, a).has(e[w]);\n  }\n  keys() {\n    return s(this, a).values().map(([e, t]) => e);\n  }\n  set(e, t) {\n    const i = e[w];\n    return s(this, a).set(i, [e, t]), this;\n  }\n  values() {\n    return s(this, a).values().map(([e, t]) => t);\n  }\n  get size() {\n    return s(this, a).size;\n  }\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n  get [Symbol.toStringTag]() {\n    return \"StringHashMap\";\n  }\n}\na = new WeakMap();\nvar b, c, g;\nclass _ {\n  constructor(e) {\n    h(this, b, new A());\n    h(this, c);\n    h(this, g, V(s(this, b)));\n    u(this, c, e);\n  }\n  getValue() {\n    return s(this, g).call(this), s(this, c);\n  }\n  setValue(e) {\n    s(this, c) !== e && (u(this, c, e), s(this, b).notify(e));\n  }\n  subscribe(e, t = !1) {\n    return t && e(s(this, c)), s(this, b).subscribe(e);\n  }\n  terminate() {\n    s(this, b).terminate();\n  }\n}\nb = new WeakMap(), c = new WeakMap(), g = new WeakMap();\nvar o, y, n;\nclass p {\n  constructor(e) {\n    h(this, o, new A());\n    h(this, y, V(s(this, o)));\n    h(this, n);\n    u(this, n, e ?? /* @__PURE__ */ new Map());\n  }\n  /** Subscribe to updates of the set */\n  subscribe(e, t = !1) {\n    return t && e(s(this, n)), s(this, o).subscribe(() => e(s(this, n)));\n  }\n  /** Get the underlying map. Readonly because changing it won't trigger updates. */\n  getValue() {\n    return s(this, y).call(this), s(this, n);\n  }\n  set(e, t) {\n    return s(this, n).set(e, t), s(this, o).notify(), this;\n  }\n  delete(e) {\n    const t = s(this, n).delete(e);\n    return t && s(this, o).notify(), t;\n  }\n  clear() {\n    const e = s(this, n).size > 0;\n    s(this, n).clear(), e && s(this, o).notify();\n  }\n}\no = new WeakMap(), y = new WeakMap(), n = new WeakMap();\nconst V = (r) => () => {\n};\nexport {\n  T as A,\n  N as H,\n  p as M,\n  A as N,\n  _ as V,\n  w as h,\n  E as n\n};\n", "const t = (r) => {\n  throw r instanceof Error ? r : new Error(r);\n};\nfunction n(r, o) {\n  if (!r)\n    throw new Error(o ?? \"assertion failed\");\n}\nconst s = (r) => new Promise((o) => setTimeout(o, r));\nexport {\n  n as a,\n  s,\n  t\n};\n"],
  "mappings": "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",
  "names": ["t", "n", "o", "s"]
}
