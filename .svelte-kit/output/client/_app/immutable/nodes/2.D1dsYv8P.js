var Nc=Object.defineProperty;var Dc=(t,e,s)=>e in t?Nc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var m=(t,e,s)=>Dc(t,typeof e!="symbol"?e+"":e,s);import{f as le,a as te}from"../chunks/dzMLb0AB.js";import{o as Oc}from"../chunks/DSJNskzs.js";import{h as Lt,k as Uc,j as lo,L as A,ap as Bc,n as Gc,H as Vc,o as $r,q as Ys,t as Es,e as vs,Z as uo,ak as Hc,a4 as qr,c as zc,b as oi,s as jc,ai as Ii,aE as Wc,X as Jr,aA as Kc,aF as Xc,aG as Yc,aH as $c,a as hi,aI as me,r as fo,p as po,aJ as Wn,ae as ci,ah as qc,d as Jc,aK as Zc,A as Qc,P as t1,aB as Mt,aq as e1,y as M,U as s1,v as n1,aL as i1,V as K,z as k,a5 as Be,R as ps,Q as r1,ar as nt,aD as a1,aM as o1}from"../chunks/CwB22T1K.js";import{d as h1,s as lt}from"../chunks/BXhUi9Ub.js";import{b as Kn,i as gs}from"../chunks/BrUdyrF8.js";function c1(t,e){return e}function l1(t,e,s){for(var n=[],i=e.length,r,a=e.length,o=0;o<i;o++){let u=e[o];po(u,()=>{if(r){if(r.pending.delete(u),r.done.add(u),r.pending.size===0){var w=t.outrogroups;li(Ii(r.done)),w.delete(r),w.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var h=n.length===0&&s!==null;if(h){var c=s,l=c.parentNode;qc(l),l.append(c),t.items.clear()}li(e,!h)}else r={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(r)}function li(t,e=!0){for(var s=0;s<t.length;s++)Jc(t[s],e)}var Zr;function u1(t,e,s,n,i,r=null){var a=t,o=new Map;Lt&&Uc();var h=null,c=Bc(()=>{var C=s();return Wc(C)?C:C==null?[]:Ii(C)}),l,u=!0;function w(){b.fallback=h,f1(b,l,a,e,n),h!==null&&(l.length===0?h.f&me?(h.f^=me,_s(h,null,a)):fo(h):po(h,()=>{h=null}))}var O=lo(()=>{l=A(c);var C=l.length;let et=!1;if(Lt){var mt=Gc(a)===Vc;mt!==(C===0)&&(a=$r(),Ys(a),Es(!1),et=!0)}for(var st=new Set,Pt=zc,Bt=jc(),yt=0;yt<C;yt+=1){Lt&&vs.nodeType===uo&&vs.data===Hc&&(a=vs,et=!0,Es(!1));var xe=l[yt],Zt=n(xe,yt),ht=u?null:o.get(Zt);ht?(ht.v&&qr(ht.v,xe),ht.i&&qr(ht.i,yt),Bt&&Pt.skipped_effects.delete(ht.e)):(ht=d1(o,u?a:Zr??(Zr=hi()),xe,Zt,yt,i,e,s),u||(ht.e.f|=me),o.set(Zt,ht)),st.add(Zt)}if(C===0&&r&&!h&&(u?h=oi(()=>r(a)):(h=oi(()=>r(Zr??(Zr=hi()))),h.f|=me)),Lt&&C>0&&Ys($r()),!u)if(Bt){for(const[jt,Re]of o)st.has(jt)||Pt.skipped_effects.add(Re.e);Pt.oncommit(w),Pt.ondiscard(()=>{})}else w();et&&Es(!0),A(c)}),b={effect:O,items:o,outrogroups:null,fallback:h};u=!1,Lt&&(a=vs)}function f1(t,e,s,n,i){var ht;var r=e.length,a=t.items,o=t.effect.first,h,c=null,l=[],u=[],w,O,b,C;for(C=0;C<r;C+=1){if(w=e[C],O=i(w,C),b=a.get(O).e,t.outrogroups!==null)for(const jt of t.outrogroups)jt.pending.delete(b),jt.done.delete(b);if(b.f&me)if(b.f^=me,b===o)_s(b,null,s);else{var et=c?c.next:o;b===t.effect.last&&(t.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),fe(t,c,b),fe(t,b,et),_s(b,et,s),c=b,l=[],u=[],o=c.next;continue}if(b.f&Wn&&fo(b),b!==o){if(h!==void 0&&h.has(b)){if(l.length<u.length){var mt=u[0],st;c=mt.prev;var Pt=l[0],Bt=l[l.length-1];for(st=0;st<l.length;st+=1)_s(l[st],mt,s);for(st=0;st<u.length;st+=1)h.delete(u[st]);fe(t,Pt.prev,Bt.next),fe(t,c,Pt),fe(t,Bt,mt),o=mt,c=Bt,C-=1,l=[],u=[]}else h.delete(b),_s(b,o,s),fe(t,b.prev,b.next),fe(t,b,c===null?t.effect.first:c.next),fe(t,c,b),c=b;continue}for(l=[],u=[];o!==null&&o!==b;)(h??(h=new Set)).add(o),u.push(o),o=o.next;if(o===null)continue}b.f&me||l.push(b),c=b,o=b.next}if(t.outrogroups!==null){for(const jt of t.outrogroups)jt.pending.size===0&&(li(Ii(jt.done)),(ht=t.outrogroups)==null||ht.delete(jt));t.outrogroups.size===0&&(t.outrogroups=null)}if(o!==null||h!==void 0){var yt=[];if(h!==void 0)for(b of h)b.f&Wn||yt.push(b);for(;o!==null;)!(o.f&Wn)&&o!==t.fallback&&yt.push(o),o=o.next;var xe=yt.length;if(xe>0){var Zt=null;l1(t,yt,Zt)}}}function d1(t,e,s,n,i,r,a,o){var h=a&Yc?a&$c?Jr(s):Kc(s,!1,!1):null,c=a&Xc?Jr(i):null;return{v:h,i:c,e:oi(()=>(r(e,h??s,c??i,o),()=>{t.delete(n)}))}}function _s(t,e,s){if(t.nodes)for(var n=t.nodes.start,i=t.nodes.end,r=e&&!(e.f&me)?e.nodes.start:s;n!==null;){var a=ci(n);if(r.before(n),n===i)return;n=a}}function fe(t,e,s){e===null?t.effect.first=s:e.next=s,s===null?t.effect.last=e:s.prev=e}function p1(t,e){let s=null,n=Lt;var i;if(Lt){s=vs;for(var r=Qc(document.head);r!==null&&(r.nodeType!==uo||r.data!==t);)r=ci(r);if(r===null)Es(!1);else{var a=ci(r);r.remove(),Ys(a)}}Lt||(i=document.head.appendChild(hi()));try{lo(()=>e(i),Zc)}finally{n&&(Es(!0),Ys(s))}}const Qr=[...` 	
\r\fÂ \v\uFEFF`];function g1(t,e,s){var n=""+t;if(s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,a=0;(a=n.indexOf(i,a))>=0;){var o=a+r;(a===0||Qr.includes(n[a-1]))&&(o===n.length||Qr.includes(n[o]))?n=(a===0?"":n.substring(0,a))+n.substring(o+1):a=o}}return n===""?null:n}function m1(t,e){return t==null?null:String(t)}function y1(t,e,s,n,i,r){var a=t.__className;if(Lt||a!==s||a===void 0){var o=g1(s,n,r);(!Lt||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=s}else if(r&&i!==r)for(var h in r){var c=!!r[h];(i==null||c!==!!i[h])&&t.classList.toggle(h,c)}return r}function v1(t,e,s,n){var i=t.__style;if(Lt||i!==e){var r=m1(e);(!Lt||r!==t.getAttribute("style"))&&(r==null?t.removeAttribute("style"):t.style.cssText=r),t.__style=e}return n}var Se=typeof self<"u"?self:{};function Pe(){throw Error("Invalid UTF8")}function ta(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}let Os,Xn;const _1=typeof TextDecoder<"u";let w1;const b1=typeof TextEncoder<"u";function go(t){if(b1)t=(w1||(w1=new TextEncoder)).encode(t);else{let s=0;const n=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)n[s++]=e;else{if(e<2048)n[s++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const r=t.charCodeAt(++i);if(r>=56320&&r<=57343){e=1024*(e-55296)+r-56320+65536,n[s++]=e>>18|240,n[s++]=e>>12&63|128,n[s++]=e>>6&63|128,n[s++]=63&e|128;continue}i--}e=65533}n[s++]=e>>12|224,n[s++]=e>>6&63|128}n[s++]=63&e|128}}t=s===n.length?n:n.subarray(0,s)}return t}var Ci,$s;t:{for(var ea=["CLOSURE_FLAGS"],Yn=Se,$n=0;$n<ea.length;$n++)if((Yn=Yn[ea[$n]])==null){$s=null;break t}$s=Yn}var Ps,sa=$s&&$s[610401301];Ci=sa!=null&&sa;const na=Se.navigator;function ui(t){return!!Ci&&!!Ps&&Ps.brands.some(({brand:e})=>e&&e.indexOf(t)!=-1)}function St(t){var e;return(e=Se.navigator)&&(e=e.userAgent)||(e=""),e.indexOf(t)!=-1}function pe(){return!!Ci&&!!Ps&&Ps.brands.length>0}function qn(){return pe()?ui("Chromium"):(St("Chrome")||St("CriOS"))&&!(!pe()&&St("Edge"))||St("Silk")}function Si(t){return Si[" "](t),t}Ps=na&&na.userAgentData||null,Si[" "]=function(){};var E1=!pe()&&(St("Trident")||St("MSIE"));!St("Android")||qn(),qn(),St("Safari")&&(qn()||!pe()&&St("Coast")||!pe()&&St("Opera")||!pe()&&St("Edge")||(pe()?ui("Microsoft Edge"):St("Edg/"))||pe()&&ui("Opera"));var mo={},ws=null;function A1(t){const e=t.length;let s=3*e/4;s%3?s=Math.floor(s):"=.".indexOf(t[e-1])!=-1&&(s="=.".indexOf(t[e-2])!=-1?s-2:s-1);const n=new Uint8Array(s);let i=0;return function(r,a){function o(c){for(;h<r.length;){const l=r.charAt(h++),u=ws[l];if(u!=null)return u;if(!/^[\s\xa0]*$/.test(l))throw Error("Unknown base64 encoding at char: "+l)}return c}yo();let h=0;for(;;){const c=o(-1),l=o(0),u=o(64),w=o(64);if(w===64&&c===-1)break;a(c<<2|l>>4),u!=64&&(a(l<<4&240|u>>2),w!=64&&a(u<<6&192|w))}}(t,function(r){n[i++]=r}),i!==s?n.subarray(0,i):n}function yo(){if(!ws){ws={};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"];for(let s=0;s<5;s++){const n=t.concat(e[s].split(""));mo[s]=n;for(let i=0;i<n.length;i++){const r=n[i];ws[r]===void 0&&(ws[r]=i)}}}}var vo=typeof Uint8Array<"u",_o=!E1&&typeof btoa=="function";function ia(t){if(!_o){var e;e===void 0&&(e=0),yo(),e=mo[e];var s=Array(Math.floor(t.length/3)),n=e[64]||"";let h=0,c=0;for(;h<t.length-2;h+=3){var i=t[h],r=t[h+1],a=t[h+2],o=e[i>>2];i=e[(3&i)<<4|r>>4],r=e[(15&r)<<2|a>>6],a=e[63&a],s[c++]=o+i+r+a}switch(o=0,a=n,t.length-h){case 2:a=e[(15&(o=t[h+1]))<<2]||n;case 1:t=t[h],s[c]=e[t>>2]+e[(3&t)<<4|o>>4]+a+n}return s.join("")}for(e="",s=0,n=t.length-10240;s<n;)e+=String.fromCharCode.apply(null,t.subarray(s,s+=10240));return e+=String.fromCharCode.apply(null,s?t.subarray(s):t),btoa(e)}const ra=/[-_.]/g,T1={"-":"+",_:"/",".":"="};function x1(t){return T1[t]||""}function wo(t){if(!_o)return A1(t);ra.test(t)&&(t=t.replace(ra,x1)),t=atob(t);const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e}function Cs(t){return vo&&t!=null&&t instanceof Uint8Array}var Ye={};function Le(){return P1||(P1=new re(null,Ye))}function Li(t){bo(Ye);var e=t.g;return(e=e==null||Cs(e)?e:typeof e=="string"?wo(e):null)==null?e:t.g=e}var re=class{h(){return new Uint8Array(Li(this)||0)}constructor(t,e){if(bo(e),this.g=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}};let P1,M1;function bo(t){if(t!==Ye)throw Error("illegal external caller")}function Eo(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function fi(t){return Eo(t=Error(t),"warning"),t}var on=typeof Symbol=="function"&&typeof Symbol()=="symbol",k1=new Set;function Ss(t,e,s=!1,n=!1){return t=typeof Symbol=="function"&&typeof Symbol()=="symbol"?n&&Symbol.for&&t?Symbol.for(t):t!=null?Symbol(t):Symbol():e,s&&k1.add(t),t}var I1=Ss("jas",void 0,!0,!0),aa=Ss(void 0,"0di"),Jn=Ss(void 0,"2ex"),ms=Ss(void 0,"1oa",!0),$e=Ss(void 0,Symbol(),!0);const v=on?I1:"Ga",Ao={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},To=Object.defineProperties;function hn(t,e){on||v in t||To(t,Ao),t[v]|=e}function $(t,e){on||v in t||To(t,Ao),t[v]=e}function is(t){return hn(t,34),t}function C1(t,e){$(e,-30975&(0|t))}function di(t,e){$(e,-30941&(34|t))}function Fi(){return typeof BigInt=="function"}function dt(t){return Array.prototype.slice.call(t)}var Ri,Ls={},xo={};function oa(t){return!(!t||typeof t!="object"||t.Ia!==xo)}function Ni(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}function Di(t,e){if(t!=null){if(typeof t=="string")t=t?new re(t,Ye):Le();else if(t.constructor!==re)if(Cs(t))t=t.length?new re(new Uint8Array(t),Ye):Le();else{if(!e)throw Error();t=void 0}}return t}function qs(t){return!(!Array.isArray(t)||t.length)&&!!(1&(0|t[v]))}const ha=[];function be(t){if(2&t)throw Error()}$(ha,55),Ri=Object.freeze(ha);class Js{constructor(e,s,n){this.l=0,this.g=e,this.h=s,this.m=n}next(){if(this.l<this.g.length){const e=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,e):e}}return{done:!0,value:void 0}}[Symbol.iterator](){return new Js(this.g,this.h,this.m)}}function Oi(t){return $e?t[$e]:void 0}var S1=Object.freeze({});function cn(t){return t.Qa=!0,t}var L1=cn(t=>typeof t=="number"),ca=cn(t=>typeof t=="string"),F1=cn(t=>typeof t=="boolean"),ln=typeof Se.BigInt=="function"&&typeof Se.BigInt(0)=="bigint",pi=cn(t=>ln?t>=N1&&t<=O1:t[0]==="-"?la(t,R1):la(t,D1));const R1=Number.MIN_SAFE_INTEGER.toString(),N1=ln?BigInt(Number.MIN_SAFE_INTEGER):void 0,D1=Number.MAX_SAFE_INTEGER.toString(),O1=ln?BigInt(Number.MAX_SAFE_INTEGER):void 0;function la(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let s=0;s<t.length;s++){const n=t[s],i=e[s];if(n>i)return!1;if(n<i)return!0}}const U1=typeof Uint8Array.prototype.slice=="function";let Po,F=0,z=0;function ua(t){const e=t>>>0;F=e,z=(t-e)/4294967296>>>0}function qe(t){if(t<0){ua(-t);const[e,s]=Vi(F,z);F=e>>>0,z=s>>>0}else ua(t)}function Ui(t){const e=Po||(Po=new DataView(new ArrayBuffer(8)));e.setFloat32(0,+t,!0),z=0,F=e.getUint32(0,!0)}function Bi(t,e){const s=4294967296*e+(t>>>0);return Number.isSafeInteger(s)?s:Ms(t,e)}function Gi(t,e){const s=2147483648&e;return s&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),typeof(t=Bi(t,e))=="number"?s?-t:t:s?"-"+t:t}function Ms(t,e){if(t>>>=0,(e>>>=0)<=2097151)var s=""+(4294967296*e+t);else Fi()?s=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(s=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),s+=8147497*e,e*=2,t>=1e7&&(s+=t/1e7>>>0,t%=1e7),s>=1e7&&(e+=s/1e7>>>0,s%=1e7),s=e+fa(s)+fa(t));return s}function fa(t){return t=String(t),"0000000".slice(t.length)+t}function un(t){if(t.length<16)qe(Number(t));else if(Fi())t=BigInt(t),F=Number(t&BigInt(4294967295))>>>0,z=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(t[0]==="-");z=F=0;const s=t.length;for(let n=e,i=(s-e)%6+e;i<=s;n=i,i+=6){const r=Number(t.slice(n,i));z*=1e6,F=1e6*F+r,F>=4294967296&&(z+=Math.trunc(F/4294967296),z>>>=0,F>>>=0)}if(e){const[n,i]=Vi(F,z);F=n,z=i}}}function Vi(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}const Hi=typeof BigInt=="function"?BigInt.asIntN:void 0,B1=typeof BigInt=="function"?BigInt.asUintN:void 0,ze=Number.isSafeInteger,fn=Number.isFinite,Zs=Math.trunc;function Ee(t){return t==null||typeof t=="number"?t:t==="NaN"||t==="Infinity"||t==="-Infinity"?Number(t):void 0}function Mo(t){return t==null||typeof t=="boolean"?t:typeof t=="number"?!!t:void 0}const G1=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function dn(t){switch(typeof t){case"bigint":return!0;case"number":return fn(t);case"string":return G1.test(t);default:return!1}}function rs(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return fn(t)?0|t:void 0}function ko(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return fn(t)?t>>>0:void 0}function da(t){if(t[0]==="-")return!1;const e=t.length;return e<20||e===20&&Number(t.substring(0,6))<184467}function zi(t){return t=Zs(t),ze(t)||(qe(t),t=Gi(F,z)),t}function ji(t){var e=Zs(Number(t));if(ze(e))return String(e);if((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),e=t.length,!(t[0]==="-"?e<20||e===20&&Number(t.substring(0,7))>-922337:e<19||e===19&&Number(t.substring(0,6))<922337))if(un(t),t=F,2147483648&(e=z))if(Fi())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[s,n]=Vi(t,e);t="-"+Ms(s,n)}else t=Ms(t,e);return t}function Qs(t){return t==null?t:typeof t=="bigint"?(pi(t)?t=Number(t):(t=Hi(64,t),t=pi(t)?Number(t):String(t)),t):dn(t)?typeof t=="number"?zi(t):ji(t):void 0}function V1(t){if(t==null)return t;var e=typeof t;if(e==="bigint")return String(B1(64,t));if(dn(t)){if(e==="string")return e=Zs(Number(t)),ze(e)&&e>=0?t=String(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),da(t)||(un(t),t=Ms(F,z))),t;if(e==="number")return(t=Zs(t))>=0&&ze(t)?t:function(s){if(s<0){qe(s);var n=Ms(F,z);return s=Number(n),ze(s)?s:n}return da(n=String(s))?n:(qe(s),Bi(F,z))}(t)}}function Io(t){if(typeof t!="string")throw Error();return t}function as(t){if(t!=null&&typeof t!="string")throw Error();return t}function Je(t){return t==null||typeof t=="string"?t:void 0}function Wi(t,e,s,n){if(t!=null&&typeof t=="object"&&t.W===Ls)return t;if(!Array.isArray(t))return s?2&n?((t=e[aa])||(is((t=new e).u),t=e[aa]=t),e=t):e=new e:e=void 0,e;let i=s=0|t[v];return i===0&&(i|=32&n),i|=2&n,i!==s&&$(t,i),new e(t)}function H1(t,e,s){if(e)t:{if(!dn(e=t))throw fi("int64");switch(typeof e){case"string":e=ji(e);break t;case"bigint":if(t=e=Hi(64,e),ca(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(L1(t)&&!Number.isSafeInteger(t))throw Error(String(t));e=ln?BigInt(e):F1(e)?e?"1":"0":ca(e)?e.trim()||"0":String(e);break t;default:e=zi(e)}}else e=Qs(t);return typeof(s=(t=e)==null?s?0:void 0:t)=="string"&&ze(e=+s)?e:s}const z1={};let j1=function(){try{return Si(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class Zn{constructor(){this.g=new Map}get(e){return this.g.get(e)}set(e,s){return this.g.set(e,s),this.size=this.g.size,this}delete(e){return e=this.g.delete(e),this.size=this.g.size,e}clear(){this.g.clear(),this.size=this.g.size}has(e){return this.g.has(e)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(e,s){return this.g.forEach(e,s)}[Symbol.iterator](){return this.entries()}}const W1=j1?(Object.setPrototypeOf(Zn.prototype,Map.prototype),Object.defineProperties(Zn.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Zn):class extends Map{constructor(){super()}};function pa(t){return t}function Qn(t){if(2&t.L)throw Error("Cannot mutate an immutable Map")}var Rt=class extends W1{constructor(t,e,s=pa,n=pa){super();let i=0|t[v];i|=64,$(t,i),this.L=i,this.S=e,this.R=s,this.Y=this.S?K1:n;for(let r=0;r<t.length;r++){const a=t[r],o=s(a[0],!1,!0);let h=a[1];e?h===void 0&&(h=null):h=n(a[1],!1,!0,void 0,void 0,i),super.set(o,h)}}na(t=ga){if(this.size!==0)return this.X(t)}X(t=ga){const e=[],s=super.entries();for(var n;!(n=s.next()).done;)(n=n.value)[0]=t(n[0]),n[1]=t(n[1]),e.push(n);return e}clear(){Qn(this),super.clear()}delete(t){return Qn(this),super.delete(this.R(t,!0,!1))}entries(){var t=this.ma();return new Js(t,X1,this)}keys(){return this.Ha()}values(){var t=this.ma();return new Js(t,Rt.prototype.get,this)}forEach(t,e){super.forEach((s,n)=>{t.call(e,this.get(n),n,this)})}set(t,e){return Qn(this),(t=this.R(t,!0,!1))==null?this:e==null?(super.delete(t),this):super.set(t,this.Y(e,!0,!0,this.S,!1,this.L))}Na(t){const e=this.R(t[0],!1,!0);t=t[1],t=this.S?t===void 0?null:t:this.Y(t,!1,!0,void 0,!1,this.L),super.set(e,t)}has(t){return super.has(this.R(t,!1,!1))}get(t){t=this.R(t,!1,!1);const e=super.get(t);if(e!==void 0){var s=this.S;return s?((s=this.Y(e,!1,!0,s,this.ra,this.L))!==e&&super.set(t,s),s):e}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function K1(t,e,s,n,i,r){return t=Wi(t,n,s,r),i&&(t=gn(t)),t}function ga(t){return t}function X1(t){return[t,this.get(t)]}let Y1,Co,$1;function ma(){return Y1||(Y1=new Rt(is([]),void 0,void 0,void 0,z1))}function Ki(t,e,s,n,i){if(t!=null){if(Array.isArray(t))t=qs(t)?void 0:i&&2&(0|t[v])?t:Xi(t,e,s,n!==void 0,i);else if(Ni(t)){const r={};for(let a in t)r[a]=Ki(t[a],e,s,n,i);t=r}else t=e(t,n);return t}}function Xi(t,e,s,n,i){const r=n||s?0|t[v]:0,a=n?!!(32&r):void 0;n=dt(t);for(let o=0;o<n.length;o++)n[o]=Ki(n[o],e,s,a,i);return s&&((t=Oi(t))&&(n[$e]=dt(t)),s(r,n)),n}function q1(t){return Ki(t,So,void 0,void 0,!1)}function So(t){return t.W===Ls?t.toJSON():t instanceof Rt?t.na(q1):function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"bigint":return pi(e)?Number(e):String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(qs(e))return}else{if(Cs(e))return ia(e);if(e instanceof re){const s=e.g;return s==null?"":typeof s=="string"?s:e.g=ia(s)}if(e instanceof Rt)return e.na()}}return e}(t)}function Lo(t){return Xi(t,So,void 0,void 0,!1)}function ye(t,e,s){return t=Fo(t,e[0],e[1],s?1:2),e!==Co&&s&&hn(t,16384),t}function Fo(t,e,s,n){if(t==null){var i=96;s?(t=[s],i|=512):t=[],e&&(i=-33521665&i|(1023&e)<<15)}else{if(!Array.isArray(t))throw Error("narr");if(2048&(i=0|t[v]))throw Error("farr");if(64&i)return t;if(n===1||n===2||(i|=64),s&&(i|=512,s!==t[0]))throw Error("mid");t:{if(n=(s=t).length){const r=n-1;if(Ni(s[r])){if((e=r-(512&(i|=256)?0:-1))>=1024)throw Error("pvtlmt");i=-33521665&i|(1023&e)<<15;break t}}if(e){if((e=Math.max(e,n-(512&i?0:-1)))>1024)throw Error("spvt");i=-33521665&i|(1023&e)<<15}}}return $(t,i),t}function gi(t,e,s=di){if(t!=null){if(vo&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var n=0|t[v];return 2&n?t:(e&&(e=n===0||!!(32&n)&&!(64&n||!(16&n))),e?($(t,-12293&(34|n)),t):Xi(t,gi,4&n?di:s,!0,!0))}return t.W===Ls?t=2&(n=0|(s=t.u)[v])?t:new t.constructor(pn(s,n,!0)):t instanceof Rt&&!(2&t.L)&&(s=is(t.X(gi)),t=new Rt(s,t.S,t.R,t.Y)),t}}function pn(t,e,s){const n=s||2&e?di:C1,i=!!(32&e);return t=function(r,a,o){const h=dt(r);var c=h.length;const l=256&a?h[c-1]:void 0;for(c+=l?-1:0,a=512&a?1:0;a<c;a++)h[a]=o(h[a]);if(l){a=h[a]={};for(const u in l)a[u]=o(l[u])}return(r=Oi(r))&&(h[$e]=dt(r)),h}(t,e,r=>gi(r,i,n)),hn(t,32|(s?2:0)),t}function gn(t){const e=t.u,s=0|e[v];return 2&s?new t.constructor(pn(e,s,!1)):t}function Ze(t,e){return ue(t=t.u,0|t[v],e)}function ue(t,e,s,n){if(s===-1)return null;var i=s+(512&e?0:-1);const r=t.length-1;return i>=r&&256&e?t[r][s]:n&&256&e&&(e=t[r][s])!=null?(t[i]!=null&&Jn!=null&&((i=(t=M1??(M1={}))[Jn]||0)>=4||(t[Jn]=i+1,Eo(t=Error(),"incident"),function(a){Se.setTimeout(()=>{throw a},0)}(t))),e):i<=r?t[i]:void 0}function R(t,e,s){const n=t.u;let i=0|n[v];return be(i),V(n,i,e,s),t}function V(t,e,s,n){const i=512&e?0:-1,r=s+i;var a=t.length-1;return r>=a&&256&e?(t[a][s]=n,e):r<=a?(t[r]=n,256&e&&s in(t=t[a])&&delete t[s],e):(n!==void 0&&(s>=(a=e>>15&1023||536870912)?n!=null&&(t[a+i]={[s]:n},$(t,e|=256)):t[r]=n),e)}function Hs(t,e){let s=0|(t=t.u)[v];const n=ue(t,s,e),i=Ee(n);return i!=null&&i!==n&&V(t,s,e,i),i}function Ro(t){let e=0|(t=t.u)[v];const s=ue(t,e,1),n=Di(s,!0);return n!=null&&n!==s&&V(t,e,1,n),n}function ke(){return S1===void 0?2:4}function Ie(t,e,s,n,i){const r=t.u,a=2&(t=0|r[v])?1:n;i=!!i;let o=0|(n=Yi(r,t,e))[v];if(!(4&o)){4&o&&(n=dt(n),o=ae(o,t),t=V(r,t,e,n));let h=0,c=0;for(;h<n.length;h++){const l=s(n[h]);l!=null&&(n[c++]=l)}c<h&&(n.length=c),o=$i(o,t),s=-4097&(20|o),o=s&=-8193,$(n,o),2&o&&Object.freeze(n)}return a===1||a===4&&32&o?ie(o)||(i=o,o|=2,o!==i&&$(n,o),Object.freeze(n)):(a===2&&ie(o)&&(n=dt(n),o=ae(o,t),o=ve(o,t,i),$(n,o),t=V(r,t,e,n)),ie(o)||(e=o,o=ve(o,t,i),o!==e&&$(n,o))),n}function Yi(t,e,s,n){return t=ue(t,e,s,n),Array.isArray(t)?t:Ri}function $i(t,e){return t===0&&(t=ae(t,e)),1|t}function ie(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function No(t){t=dt(t);for(let e=0;e<t.length;e++){const s=t[e]=dt(t[e]);Array.isArray(s[1])&&(s[1]=is(s[1]))}return t}function mi(t,e,s,n){let i=0|(t=t.u)[v];be(i),V(t,i,e,(n==="0"?Number(s)===0:s===n)?void 0:s)}function os(t,e,s,n,i){be(e);var r=!(!(64&e)&&16384&e);const a=(i=Yi(t,e,s,i))!==Ri;if(r||!a){let o=r=a?0|i[v]:0;(!a||2&o||ie(o)||4&o&&!(32&o))&&(i=dt(i),o=ae(o,e),e=V(t,e,s,i)),o=-13&$i(o,e),o=ve(n?-17&o:16|o,e,!0),o!==r&&$(i,o)}return i}function ti(t,e){var s=Th;return Ji(qi(t=t.u),t,0|t[v],s)===e?e:-1}function qi(t){if(on)return t[ms]??(t[ms]=new Map);if(ms in t)return t[ms];const e=new Map;return Object.defineProperty(t,ms,{value:e}),e}function Do(t,e,s,n){const i=qi(t),r=Ji(i,t,e,s);return r!==n&&(r&&(e=V(t,e,r)),i.set(s,n)),e}function Ji(t,e,s,n){let i=t.get(n);if(i!=null)return i;i=0;for(let r=0;r<n.length;r++){const a=n[r];ue(e,s,a)!=null&&(i!==0&&(s=V(e,s,i)),i=a)}return t.set(n,i),i}function Zi(t,e,s,n){let i,r=0|t[v];if((n=ue(t,r,s,n))!=null&&n.W===Ls)return(e=gn(n))!==n&&V(t,r,s,e),e.u;if(Array.isArray(n)){const a=0|n[v];i=2&a?ye(pn(n,a,!1),e,!0):64&a?n:ye(i,e,!0)}else i=ye(void 0,e,!0);return i!==n&&V(t,r,s,i),i}function Oo(t,e,s,n){let i=0|(t=t.u)[v];return(e=Wi(n=ue(t,i,s,n),e,!1,i))!==n&&e!=null&&V(t,i,s,e),e}function P(t,e,s,n=!1){if((e=Oo(t,e,s,n))==null)return e;if(!(2&(n=0|(t=t.u)[v]))){const i=gn(e);i!==e&&V(t,n,s,e=i)}return e}function Uo(t,e,s,n,i,r,a){t=t.u;var o=!!(2&e);const h=o?1:i;r=!!r,a&&(a=!o);var c=0|(i=Yi(t,e,n))[v];if(!(o=!!(4&c))){var l=i,u=e;const w=!!(2&(c=$i(c,e)));w&&(u|=2);let O=!w,b=!0,C=0,et=0;for(;C<l.length;C++){const mt=Wi(l[C],s,!1,u);if(mt instanceof s){if(!w){const st=!!(2&(0|mt.u[v]));O&&(O=!st),b&&(b=st)}l[et++]=mt}}et<C&&(l.length=et),c|=4,c=b?16|c:-17&c,$(l,c=O?8|c:-9&c),w&&Object.freeze(l)}if(a&&!(8&c||!i.length&&(h===1||h===4&&32&c))){for(ie(c)&&(i=dt(i),c=ae(c,e),e=V(t,e,n,i)),s=i,a=c,l=0;l<s.length;l++)(c=s[l])!==(u=gn(c))&&(s[l]=u);a|=8,$(s,a=s.length?-17&a:16|a),c=a}return h===1||h===4&&32&c?ie(c)||(e=c,(c|=!i.length||16&c&&(!o||32&c)?2:2048)!==e&&$(i,c),Object.freeze(i)):(h===2&&ie(c)&&($(i=dt(i),c=ve(c=ae(c,e),e,r)),e=V(t,e,n,i)),ie(c)||(n=c,(c=ve(c,e,r))!==n&&$(i,c))),i}function he(t,e,s){const n=0|t.u[v];return Uo(t,n,e,s,ke(),!1,!(2&n))}function _(t,e,s,n){return n==null&&(n=void 0),R(t,s,n)}function As(t,e,s,n){n==null&&(n=void 0);t:{let i=0|(t=t.u)[v];if(be(i),n==null){const r=qi(t);if(Ji(r,t,i,s)!==e)break t;r.set(s,0)}else i=Do(t,i,s,e);V(t,i,e,n)}}function ae(t,e){return-2049&(t=32|(2&e?2|t:-3&t))}function ve(t,e,s){return 32&e&&s||(t&=-33),t}function tn(t,e,s,n){const i=0|t.u[v];be(i),t=Uo(t,i,s,e,2,!0),n=n??new s,t.push(n),t[v]=2&(0|n.u[v])?-9&t[v]:-17&t[v]}function Ft(t,e){return rs(Ze(t,e))}function Nt(t,e){return Je(Ze(t,e))}function X(t,e){return Hs(t,e)??0}function ks(t,e,s){if(s!=null&&typeof s!="boolean")throw t=typeof s,Error(`Expected boolean but got ${t!="object"?t:s?Array.isArray(s)?"array":t:"null"}: ${s}`);R(t,e,s)}function qt(t,e,s){if(s!=null){if(typeof s!="number"||!fn(s))throw fi("int32");s|=0}R(t,e,s)}function g(t,e,s){if(s!=null&&typeof s!="number")throw Error(`Value of float/double field must be a number, found ${typeof s}: ${s}`);R(t,e,s)}function en(t,e,s){{const a=t.u;let o=0|a[v];if(be(o),s==null)V(a,o,e);else{var n=t=0|s[v],i=ie(t),r=i||Object.isFrozen(s);for(i||(t=0),r||(s=dt(s),n=0,t=ve(t=ae(t,o),o,!0),r=!1),t|=21,i=0;i<s.length;i++){const h=s[i],c=Io(h);Object.is(h,c)||(r&&(s=dt(s),n=0,t=ve(t=ae(t,o),o,!0),r=!1),s[i]=c)}t!==n&&(r&&(s=dt(s),t=ve(t=ae(t,o),o,!0)),$(s,t)),V(a,o,e,s)}}}function mn(t,e,s){be(0|t.u[v]),Ie(t,e,Je,2,!0).push(Io(s))}function Bo(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function Qi(){return Error("Failed to read varint, encoding is invalid.")}function Go(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function tr(t){if(typeof t=="string")return{buffer:wo(t),N:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),N:!1};if(t.constructor===Uint8Array)return{buffer:t,N:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),N:!1};if(t.constructor===re)return{buffer:Li(t)||new Uint8Array(0),N:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function er(t,e){let s,n=0,i=0,r=0;const a=t.h;let o=t.g;do s=a[o++],n|=(127&s)<<r,r+=7;while(r<32&&128&s);for(r>32&&(i|=(127&s)>>4),r=3;r<32&&128&s;r+=7)s=a[o++],i|=(127&s)<<r;if(Ce(t,o),s<128)return e(n>>>0,i>>>0);throw Qi()}function sr(t){let e=0,s=t.g;const n=s+10,i=t.h;for(;s<n;){const r=i[s++];if(e|=r,(128&r)==0)return Ce(t,s),!!(127&e)}throw Qi()}function _e(t){const e=t.h;let s=t.g,n=e[s++],i=127&n;if(128&n&&(n=e[s++],i|=(127&n)<<7,128&n&&(n=e[s++],i|=(127&n)<<14,128&n&&(n=e[s++],i|=(127&n)<<21,128&n&&(n=e[s++],i|=n<<28,128&n&&128&e[s++]&&128&e[s++]&&128&e[s++]&&128&e[s++]&&128&e[s++])))))throw Qi();return Ce(t,s),i}function ce(t){return _e(t)>>>0}function yi(t){var e=t.h;const s=t.g,n=e[s],i=e[s+1],r=e[s+2];return e=e[s+3],Ce(t,t.g+4),(n<<0|i<<8|r<<16|e<<24)>>>0}function vi(t){var e=yi(t);t=2*(e>>31)+1;const s=e>>>23&255;return e&=8388607,s==255?e?NaN:t*(1/0):s==0?1401298464324817e-60*t*e:t*Math.pow(2,s-150)*(e+8388608)}function J1(t){return _e(t)}function ei(t,e,{ba:s=!1}={}){t.ba=s,e&&(e=tr(e),t.h=e.buffer,t.m=e.N,t.j=0,t.l=t.h.length,t.g=t.j)}function Ce(t,e){if(t.g=e,e>t.l)throw Go(t.l,e)}function Vo(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const s=t.g,n=s+e;if(n>t.l)throw Go(e,t.l-s);return t.g=n,s}function Ho(t,e){if(e==0)return Le();var s=Vo(t,e);return t.ba&&t.m?s=t.h.subarray(s,s+e):(t=t.h,s=s===(e=s+e)?new Uint8Array(0):U1?t.slice(s,e):new Uint8Array(t.subarray(s,e))),s.length==0?Le():new re(s,Ye)}Rt.prototype.toJSON=void 0,Rt.prototype.Ia=xo;var ya=[];function zo(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var s=ce(t.g);if(e=s>>>3,!((s&=7)>=0&&s<=5))throw Bo(s,t.l);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=s,!0}function zs(t){switch(t.h){case 0:t.h!=0?zs(t):sr(t.g);break;case 1:Ce(t=t.g,t.g+8);break;case 2:if(t.h!=2)zs(t);else{var e=ce(t.g);Ce(t=t.g,t.g+e)}break;case 5:Ce(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!zo(t))throw Error("Unmatched start-group tag: stream EOF");if(t.h==4){if(t.m!=e)throw Error("Unmatched end-group tag");break}zs(t)}break;default:throw Bo(t.h,t.l)}}function Fs(t,e,s){const n=t.g.l,i=ce(t.g),r=t.g.g+i;let a=r-n;if(a<=0&&(t.g.l=r,s(e,t,void 0,void 0,void 0),a=r-t.g.g),a)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-a} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=r,t.g.l=n,e}function nr(t){var e=ce(t.g),s=Vo(t=t.g,e);if(t=t.h,_1){var n,i=t;(n=Xn)||(n=Xn=new TextDecoder("utf-8",{fatal:!0})),e=s+e,i=s===0&&e===i.length?i:i.subarray(s,e);try{var r=n.decode(i)}catch(o){if(Os===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),Os=!0}catch{Os=!1}}throw!Os&&(Xn=void 0),o}}else{e=(r=s)+e,s=[];let o,h=null;for(;r<e;){var a=t[r++];a<128?s.push(a):a<224?r>=e?Pe():(o=t[r++],a<194||(192&o)!=128?(r--,Pe()):s.push((31&a)<<6|63&o)):a<240?r>=e-1?Pe():(o=t[r++],(192&o)!=128||a===224&&o<160||a===237&&o>=160||(192&(n=t[r++]))!=128?(r--,Pe()):s.push((15&a)<<12|(63&o)<<6|63&n)):a<=244?r>=e-2?Pe():(o=t[r++],(192&o)!=128||o-144+(a<<28)>>30||(192&(n=t[r++]))!=128||(192&(i=t[r++]))!=128?(r--,Pe()):(a=(7&a)<<18|(63&o)<<12|(63&n)<<6|63&i,a-=65536,s.push(55296+(a>>10&1023),56320+(1023&a)))):Pe(),s.length>=8192&&(h=ta(h,s),s.length=0)}r=ta(h,s)}return r}function jo(t){const e=ce(t.g);return Ho(t.g,e)}function yn(t,e,s){var n=ce(t.g);for(n=t.g.g+n;t.g.g<n;)s.push(e(t.g))}var Us=[];function Z1(t){return t}let je;function Gt(t,e,s){e.g?e.m(t,e.g,e.h,s):e.m(t,e.h,s)}var p=class{constructor(t,e){this.u=Fo(t,e)}toJSON(){const t=!je;try{return t&&(je=Lo),Wo(this)}finally{t&&(je=void 0)}}l(){var t=R2;return t.g?t.l(this,t.g,t.h,!0):t.l(this,t.h,t.defaultValue,!0)}clone(){const t=this.u;return new this.constructor(pn(t,0|t[v],!1))}N(){return!!(2&(0|this.u[v]))}};function Wo(t){var e=t.u;{e=(t=je(e))!==e;let c=t.length;if(c){var s=t[c-1],n=Ni(s);n?c--:s=void 0;var i=t;if(n){t:{var r,a=s,o=!1;if(a)for(let l in a)isNaN(+l)?(r??(r={}))[l]=a[l]:(n=a[l],Array.isArray(n)&&(qs(n)||oa(n)&&n.size===0)&&(n=null),n==null&&(o=!0),n!=null&&((r??(r={}))[l]=n));if(o||(r=a),r)for(let l in r){o=r;break t}o=null}a=o==null?s!=null:o!==s}for(;c>0&&((r=i[c-1])==null||qs(r)||oa(r)&&r.size===0);c--)var h=!0;(i!==t||a||h)&&(e?(h||a||o)&&(i.length=c):i=Array.prototype.slice.call(i,0,c),o&&i.push(o)),h=i}else h=t}return h}function va(t){return t?/^\d+$/.test(t)?(un(t),new _i(F,z)):null:Q1||(Q1=new _i(0,0))}p.prototype.W=Ls,p.prototype.toString=function(){try{return je=Z1,Wo(this).toString()}finally{je=void 0}};var _i=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let Q1;function _a(t){return t?/^-?\d+$/.test(t)?(un(t),new wi(F,z)):null:t2||(t2=new wi(0,0))}var wi=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let t2;function We(t,e,s){for(;s>0||e>127;)t.g.push(127&e|128),e=(e>>>7|s<<25)>>>0,s>>>=7;t.g.push(e)}function hs(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function vn(t,e){if(e>=0)hs(t,e);else{for(let s=0;s<9;s++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function Is(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function Qe(t,e){e.length!==0&&(t.l.push(e),t.h+=e.length)}function At(t,e,s){hs(t.g,8*e+s)}function ir(t,e){return At(t,e,2),e=t.g.end(),Qe(t,e),e.push(t.h),e}function rr(t,e){var s=e.pop();for(s=t.h+t.g.length()-s;s>127;)e.push(127&s|128),s>>>=7,t.h++;e.push(s),t.h++}function _n(t,e,s){At(t,e,2),hs(t.g,s.length),Qe(t,t.g.end()),Qe(t,s)}function sn(t,e,s,n){s!=null&&(e=ir(t,e),n(s,t),rr(t,e))}function Vt(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var ar=Vt(),Ko=Vt(),or=Vt(),hr=Vt(),Xo=Vt(),Yo=Vt(),cr=Vt(),$o=Vt(),qo=Vt(),cs=class{constructor(t,e,s){this.g=t,this.h=e,t=ar,this.l=!!t&&s===t||!1}};function wn(t,e){return new cs(t,e,ar)}function Jo(t,e,s,n,i){sn(t,s,eh(e,n),i)}const e2=wn(function(t,e,s,n,i){return t.h===2&&(Fs(t,Zi(e,n,s),i),!0)},Jo),s2=wn(function(t,e,s,n,i){return t.h===2&&(Fs(t,Zi(e,n,s,!0),i),!0)},Jo);var bn=Symbol(),lr=Symbol(),wa=Symbol(),ba=Symbol();let Zo,Qo;function Fe(t,e,s,n){var i=n[t];if(i)return i;(i={}).Pa=n,i.V=function(u){switch(typeof u){case"boolean":return Co||(Co=[0,void 0,!0]);case"number":return u>0?void 0:u===0?$1||($1=[0,void 0]):[-u,void 0];case"string":return[0,u];case"object":return u}}(n[0]);var r=n[1];let a=1;r&&r.constructor===Object&&(i.ga=r,typeof(r=n[++a])=="function"&&(i.la=!0,Zo??(Zo=r),Qo??(Qo=n[a+1]),r=n[a+=2]));const o={};for(;r&&Array.isArray(r)&&r.length&&typeof r[0]=="number"&&r[0]>0;){for(var h=0;h<r.length;h++)o[r[h]]=r;r=n[++a]}for(h=1;r!==void 0;){let u;typeof r=="number"&&(h+=r,r=n[++a]);var c=void 0;if(r instanceof cs?u=r:(u=e2,a--),u==null?void 0:u.l){r=n[++a],c=n;var l=a;typeof r=="function"&&(r=r(),c[l]=r),c=r}for(l=h+1,typeof(r=n[++a])=="number"&&r<0&&(l-=r,r=n[++a]);h<l;h++){const w=o[h];c?s(i,h,u,c,w):e(i,h,u,w)}}return n[t]=i}function th(t){return Array.isArray(t)?t[0]instanceof cs?t:[s2,t]:[t,void 0]}function eh(t,e){return t instanceof p?t.u:Array.isArray(t)?ye(t,e,!1):void 0}function ur(t,e,s,n){const i=s.g;t[e]=n?(r,a,o)=>i(r,a,o,n):i}function fr(t,e,s,n,i){const r=s.g;let a,o;t[e]=(h,c,l)=>r(h,c,l,o||(o=Fe(lr,ur,fr,n).V),a||(a=dr(n)),i)}function dr(t){let e=t[wa];if(e!=null)return e;const s=Fe(lr,ur,fr,t);return e=s.la?(n,i)=>Zo(n,i,s):(n,i)=>{const r=0|n[v];for(;zo(i)&&i.h!=4;){var a=i.m,o=s[a];if(o==null){var h=s.ga;h&&(h=h[a])&&(h=n2(h))!=null&&(o=s[a]=h)}o!=null&&o(i,n,a)||(a=(o=i).l,zs(o),o.fa?o=void 0:(h=o.g.g-a,o.g.g=a,o=Ho(o.g,h)),a=n,o&&((h=a[$e])?h.push(o):a[$e]=[o]))}return 16384&r&&is(n),!0},t[wa]=e}function n2(t){const e=(t=th(t))[0].g;if(t=t[1]){const s=dr(t),n=Fe(lr,ur,fr,t).V;return(i,r,a)=>e(i,r,a,n,s)}return e}function En(t,e,s){t[e]=s.h}function An(t,e,s,n){let i,r;const a=s.h;t[e]=(o,h,c)=>a(o,h,c,r||(r=Fe(bn,En,An,n).V),i||(i=sh(n)))}function sh(t){let e=t[ba];if(!e){const s=Fe(bn,En,An,t);e=(n,i)=>nh(n,i,s),t[ba]=e}return e}function nh(t,e,s){for(var n=0|t[v],i=512&n?0:-1,r=t.length,a=512&n?1:0,o=r+(256&n?-1:0);a<o;a++){const h=t[a];if(h==null)continue;const c=a-i,l=Ea(s,c);l&&l(e,h,c)}if(256&n){n=t[r-1];for(const h in n)i=+h,Number.isNaN(i)||(r=n[i])!=null&&(o=Ea(s,i))&&o(e,r,i)}if(t=Oi(t))for(Qe(e,e.g.end()),s=0;s<t.length;s++)Qe(e,Li(t[s])||new Uint8Array(0))}function Ea(t,e){var s=t[e];if(s)return s;if((s=t.ga)&&(s=s[e])){var n=(s=th(s))[0].h;if(s=s[1]){const i=sh(s),r=Fe(bn,En,An,s).V;s=t.la?Qo(r,i):(a,o,h)=>n(a,o,h,r,i)}else s=n;return t[e]=s}}function ls(t,e){if(Array.isArray(e)){var s=0|e[v];if(4&s)return e;for(var n=0,i=0;n<e.length;n++){const r=t(e[n]);r!=null&&(e[i++]=r)}return i<n&&(e.length=i),$(e,-12289&(5|s)),2&s&&Object.freeze(e),e}}function at(t,e,s){return new cs(t,e,s)}function us(t,e,s){return new cs(t,e,s)}function ot(t,e,s){V(t,0|t[v],e,s)}var i2=wn(function(t,e,s,n,i){return t.h===2&&(t=Fs(t,ye([void 0,void 0],n,!0),i),be(n=0|e[v]),(i=ue(e,n,s))instanceof Rt?2&i.L?((i=i.X()).push(t),V(e,n,s,i)):i.Na(t):Array.isArray(i)?(2&(0|i[v])&&V(e,n,s,i=No(i)),i.push(t)):V(e,n,s,[t]),!0)},function(t,e,s,n,i){if(e instanceof Rt)e.forEach((r,a)=>{sn(t,s,ye([a,r],n,!1),i)});else if(Array.isArray(e))for(let r=0;r<e.length;r++){const a=e[r];Array.isArray(a)&&sn(t,s,ye(a,n,!1),i)}});function ih(t,e,s){if(e=function(n){if(n==null)return n;const i=typeof n;if(i==="bigint")return String(Hi(64,n));if(dn(n)){if(i==="string")return ji(n);if(i==="number")return zi(n)}}(e),e!=null&&(typeof e=="string"&&_a(e),e!=null))switch(At(t,s,0),typeof e){case"number":t=t.g,qe(e),We(t,F,z);break;case"bigint":s=BigInt.asUintN(64,e),s=new wi(Number(s&BigInt(4294967295)),Number(s>>BigInt(32))),We(t.g,s.h,s.g);break;default:s=_a(e),We(t.g,s.h,s.g)}}function rh(t,e,s){(e=rs(e))!=null&&e!=null&&(At(t,s,0),vn(t.g,e))}function ah(t,e,s){(e=Mo(e))!=null&&(At(t,s,0),t.g.g.push(e?1:0))}function oh(t,e,s){(e=Je(e))!=null&&_n(t,s,go(e))}function hh(t,e,s,n,i){sn(t,s,eh(e,n),i)}function ch(t,e,s){(e=e==null||typeof e=="string"||Cs(e)||e instanceof re?e:void 0)!=null&&_n(t,s,tr(e).buffer)}function lh(t,e,s){return(t.h===5||t.h===2)&&(e=os(e,0|e[v],s,!1,!1),t.h==2?yn(t,vi,e):e.push(vi(t.g)),!0)}var se=at(function(t,e,s){if(t.h!==1)return!1;var n=t.g;t=yi(n);const i=yi(n);n=2*(i>>31)+1;const r=i>>>20&2047;return t=4294967296*(1048575&i)+t,ot(e,s,r==2047?t?NaN:n*(1/0):r==0?5e-324*n*t:n*Math.pow(2,r-1075)*(t+4503599627370496)),!0},function(t,e,s){(e=Ee(e))!=null&&(At(t,s,1),t=t.g,(s=Po||(Po=new DataView(new ArrayBuffer(8)))).setFloat64(0,+e,!0),F=s.getUint32(0,!0),z=s.getUint32(4,!0),Is(t,F),Is(t,z))},Vt()),q=at(function(t,e,s){return t.h===5&&(ot(e,s,vi(t.g)),!0)},function(t,e,s){(e=Ee(e))!=null&&(At(t,s,5),t=t.g,Ui(e),Is(t,F))},cr),r2=us(lh,function(t,e,s){if((e=ls(Ee,e))!=null)for(let a=0;a<e.length;a++){var n=t,i=s,r=e[a];r!=null&&(At(n,i,5),n=n.g,Ui(r),Is(n,F))}},cr),pr=us(lh,function(t,e,s){if((e=ls(Ee,e))!=null&&e.length){At(t,s,2),hs(t.g,4*e.length);for(let n=0;n<e.length;n++)s=t.g,Ui(e[n]),Is(s,F)}},cr),we=at(function(t,e,s){return t.h===0&&(ot(e,s,er(t.g,Gi)),!0)},ih,Yo),si=at(function(t,e,s){return t.h===0&&(ot(e,s,(t=er(t.g,Gi))===0?void 0:t),!0)},ih,Yo),a2=at(function(t,e,s){return t.h===0&&(ot(e,s,er(t.g,Bi)),!0)},function(t,e,s){if((e=V1(e))!=null&&(typeof e=="string"&&va(e),e!=null))switch(At(t,s,0),typeof e){case"number":t=t.g,qe(e),We(t,F,z);break;case"bigint":s=BigInt.asUintN(64,e),s=new _i(Number(s&BigInt(4294967295)),Number(s>>BigInt(32))),We(t.g,s.h,s.g);break;default:s=va(e),We(t.g,s.h,s.g)}},Vt()),j=at(function(t,e,s){return t.h===0&&(ot(e,s,_e(t.g)),!0)},rh,hr),Tn=us(function(t,e,s){return(t.h===0||t.h===2)&&(e=os(e,0|e[v],s,!1,!1),t.h==2?yn(t,_e,e):e.push(_e(t.g)),!0)},function(t,e,s){if((e=ls(rs,e))!=null&&e.length){s=ir(t,s);for(let n=0;n<e.length;n++)vn(t.g,e[n]);rr(t,s)}},hr),He=at(function(t,e,s){return t.h===0&&(ot(e,s,(t=_e(t.g))===0?void 0:t),!0)},rh,hr),B=at(function(t,e,s){return t.h===0&&(ot(e,s,sr(t.g)),!0)},ah,Ko),Ke=at(function(t,e,s){return t.h===0&&(ot(e,s,(t=sr(t.g))===!1?void 0:t),!0)},ah,Ko),it=us(function(t,e,s){return t.h===2&&(t=nr(t),os(e,0|e[v],s,!1).push(t),!0)},function(t,e,s){if((e=ls(Je,e))!=null)for(let a=0;a<e.length;a++){var n=t,i=s,r=e[a];r!=null&&_n(n,i,go(r))}},or),ge=at(function(t,e,s){return t.h===2&&(ot(e,s,(t=nr(t))===""?void 0:t),!0)},oh,or),S=at(function(t,e,s){return t.h===2&&(ot(e,s,nr(t)),!0)},oh,or),Z=function(t,e,s=ar){return new cs(t,e,s)}(function(t,e,s,n,i){return t.h===2&&(n=ye(void 0,n,!0),os(e,0|e[v],s,!0).push(n),Fs(t,n,i),!0)},function(t,e,s,n,i){if(Array.isArray(e))for(let r=0;r<e.length;r++)hh(t,e[r],s,n,i)}),L=wn(function(t,e,s,n,i,r){return t.h===2&&(Do(e,0|e[v],r,s),Fs(t,e=Zi(e,n,s),i),!0)},hh),uh=at(function(t,e,s){return t.h===2&&(ot(e,s,jo(t)),!0)},ch,$o),o2=us(function(t,e,s){return(t.h===0||t.h===2)&&(e=os(e,0|e[v],s,!1,!1),t.h==2?yn(t,ce,e):e.push(ce(t.g)),!0)},function(t,e,s){if((e=ls(ko,e))!=null)for(let a=0;a<e.length;a++){var n=t,i=s,r=e[a];r!=null&&(At(n,i,0),hs(n.g,r))}},Xo),h2=at(function(t,e,s){return t.h===0&&(ot(e,s,(t=ce(t.g))===0?void 0:t),!0)},function(t,e,s){(e=ko(e))!=null&&e!=null&&(At(t,s,0),hs(t.g,e))},Xo),Dt=at(function(t,e,s){return t.h===0&&(ot(e,s,_e(t.g)),!0)},function(t,e,s){(e=rs(e))!=null&&(e=parseInt(e,10),At(t,s,0),vn(t.g,e))},qo);class c2{constructor(e,s){this.h=e,this.g=s,this.l=P,this.m=_,this.defaultValue=void 0}}function Ht(t,e){return new c2(t,e)}function Ae(t,e){return(s,n)=>{if(Us.length){const r=Us.pop();r.o(n),ei(r.g,s,n),s=r}else s=new class{constructor(r,a){if(ya.length){const o=ya.pop();ei(o,r,a),r=o}else r=new class{constructor(o,h){this.h=null,this.m=!1,this.g=this.l=this.j=0,ei(this,o,h)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(r,a);this.g=r,this.l=this.g.g,this.h=this.m=-1,this.o(a)}o({fa:r=!1}={}){this.fa=r}}(s,n);try{const r=new t,a=r.u;dr(e)(a,s);var i=r}finally{s.g.clear(),s.m=-1,s.h=-1,Us.length<100&&Us.push(s)}return i}}function xn(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const a=this.g;return this.g=[],a}}}};nh(this.u,e,Fe(bn,En,An,t)),Qe(e,e.g.end());const s=new Uint8Array(e.h),n=e.l,i=n.length;let r=0;for(let a=0;a<i;a++){const o=n[a];s.set(o,r),r+=o.length}return e.l=[s],s}}var Aa=class extends p{constructor(t){super(t)}},Ta=[0,ge,at(function(t,e,s){return t.h===2&&(ot(e,s,(t=jo(t))===Le()?void 0:t),!0)},function(t,e,s){if(e!=null){if(e instanceof p){const n=e.Ra;return void(n&&(e=n(e),e!=null&&_n(t,s,tr(e).buffer)))}if(Array.isArray(e))return}ch(t,e,s)},$o)];let ni,xa=globalThis.trustedTypes;function Pa(t){ni===void 0&&(ni=function(){let s=null;if(!xa)return s;try{const n=i=>i;s=xa.createPolicy("goog#html",{createHTML:n,createScript:n,createScriptURL:n})}catch{}return s}());var e=ni;return new class{constructor(s){this.g=s}toString(){return this.g+""}}(e?e.createScriptURL(t):t)}function l2(t,...e){if(e.length===0)return Pa(t[0]);let s=t[0];for(let n=0;n<e.length;n++)s+=encodeURIComponent(e[n])+t[n+1];return Pa(s)}var fh=[0,j,Dt,B,-1,Tn,Dt,-1],u2=class extends p{constructor(t){super(t)}},dh=[0,B,S,B,Dt,-1,us(function(t,e,s){return(t.h===0||t.h===2)&&(e=os(e,0|e[v],s,!1,!1),t.h==2?yn(t,J1,e):e.push(_e(t.g)),!0)},function(t,e,s){if((e=ls(rs,e))!=null&&e.length){s=ir(t,s);for(let n=0;n<e.length;n++)vn(t.g,e[n]);rr(t,s)}},qo),S,-1,[0,B,-1],Dt,B,-1],ph=[0,S,-2],Ma=class extends p{constructor(t){super(t)}},gh=[0],mh=[0,j,B,1,B,-3],Et=class extends p{constructor(t){super(t,2)}},J={};J[336783863]=[0,S,B,-1,j,[0,[1,2,3,4,5,6,7,8],L,gh,L,dh,L,ph,L,mh,L,fh,L,[0,S,-2],L,[0,S,Dt],L,[0,Dt,S]],[0,S],B,[0,[1,3],[2,4],L,[0,Tn],-1,L,[0,it],-1,Z,[0,S,-1]],S];var ka=[0,si,-1,Ke,-3,si,Tn,ge,He,si,-1,Ke,He,Ke,-2,ge];function Tt(t,e){mi(t,2,as(e),"")}function N(t,e){mn(t,3,e)}function x(t,e){mn(t,4,e)}var rt=class extends p{constructor(t){super(t,500)}o(t){return _(this,0,7,t)}},Ts=[-1,{}],Ia=[0,S,1,Ts],Ca=[0,S,it,Ts];function xt(t,e){tn(t,1,rt,e)}function D(t,e){mn(t,10,e)}function I(t,e){mn(t,15,e)}var gt=class extends p{constructor(t){super(t,500)}o(t){return _(this,0,1001,t)}},yh=[-500,Z,[-500,ge,-1,it,-3,[-2,J,B],Z,Ta,He,-1,Ia,Ca,Z,[0,ge,Ke],ge,ka,He,it,987,it],4,Z,[-500,S,-1,[-1,{}],998,S],Z,[-500,S,it,-1,[-2,{},B],997,it,-1],He,Z,[-500,S,it,Ts,998,it],it,He,Ia,Ca,Z,[0,ge,-1,Ts],it,-2,ka,ge,-1,Ke,[0,Ke,h2],978,Ts,Z,Ta];gt.prototype.g=xn(yh);var f2=Ae(gt,yh),d2=class extends p{constructor(t){super(t)}},vh=class extends p{constructor(t){super(t)}g(){return he(this,d2,1)}},_h=[0,Z,[0,j,q,S,-1]],Pn=Ae(vh,_h),p2=class extends p{constructor(t){super(t)}},g2=class extends p{constructor(t){super(t)}},ii=class extends p{constructor(t){super(t)}h(){return P(this,p2,2)}g(){return he(this,g2,5)}},wh=Ae(class extends p{constructor(t){super(t)}},[0,it,Tn,pr,[0,Dt,[0,j,-3],[0,q,-3],[0,j,-1,[0,Z,[0,j,-2]]],Z,[0,q,-1,S,q]],S,-1,we,Z,[0,j,q],it,we]),bh=class extends p{constructor(t){super(t)}},Xe=Ae(class extends p{constructor(t){super(t)}},[0,Z,[0,q,-4]]),Eh=class extends p{constructor(t){super(t)}},Rs=Ae(class extends p{constructor(t){super(t)}},[0,Z,[0,q,-4]]),m2=class extends p{constructor(t){super(t)}},y2=[0,j,-1,pr,Dt],Ah=class extends p{constructor(t){super(t)}};Ah.prototype.g=xn([0,q,-4,we]);var v2=class extends p{constructor(t){super(t)}},_2=Ae(class extends p{constructor(t){super(t)}},[0,Z,[0,1,j,S,_h],we]),Sa=class extends p{constructor(t){super(t)}},w2=class extends p{constructor(t){super(t)}oa(){const t=Ro(this);return t??Le()}},b2=class extends p{constructor(t){super(t)}},Th=[1,2],E2=Ae(class extends p{constructor(t){super(t)}},[0,Z,[0,Th,L,[0,pr],L,[0,uh],j,S],we]),gr=class extends p{constructor(t){super(t)}},xh=[0,S,j,q,it,-1],La=class extends p{constructor(t){super(t)}},A2=[0,B,-1],Fa=class extends p{constructor(t){super(t)}},js=[1,2,3,4,5],nn=class extends p{constructor(t){super(t)}g(){return Ro(this)!=null}h(){return Nt(this,2)!=null}},G=class extends p{constructor(t){super(t)}g(){return Mo(Ze(this,2))??!1}},Ph=[0,uh,S,[0,j,we,-1],[0,a2,we]],Y=[0,Ph,B,[0,js,L,mh,L,dh,L,fh,L,gh,L,ph],Dt],Mn=class extends p{constructor(t){super(t)}},mr=[0,Y,q,-1,j],T2=Ht(502141897,Mn);J[502141897]=mr;var x2=Ae(class extends p{constructor(t){super(t)}},[0,[0,Dt,-1,r2,o2],y2]),Mh=class extends p{constructor(t){super(t)}},kh=class extends p{constructor(t){super(t)}},yr=[0,Y,q,[0,Y],B],Ih=[0,Y,mr,yr,q,[0,[0,Ph]]],P2=Ht(508968150,kh);J[508968150]=Ih,J[508968149]=yr;var Ch=class extends p{constructor(t){super(t)}},M2=Ht(513916220,Ch);J[513916220]=[0,Y,Ih,j];var Ge=class extends p{constructor(t){super(t)}h(){return P(this,gr,2)}g(){R(this,2)}},Sh=[0,Y,xh];J[478825465]=Sh;var k2=class extends p{constructor(t){super(t)}},Lh=class extends p{constructor(t){super(t)}},vr=class extends p{constructor(t){super(t)}},_r=class extends p{constructor(t){super(t)}},Fh=class extends p{constructor(t){super(t)}},Ra=[0,Y,[0,Y],Sh,-1],Rh=[0,Y,q,j],wr=[0,Y,q],Nh=[0,Y,Rh,wr,q],I2=Ht(479097054,Fh);J[479097054]=[0,Y,Nh,Ra],J[463370452]=Ra,J[464864288]=Rh;var C2=Ht(462713202,_r);J[462713202]=Nh,J[474472470]=wr;var S2=class extends p{constructor(t){super(t)}},Dh=class extends p{constructor(t){super(t)}},Oh=class extends p{constructor(t){super(t)}},Uh=class extends p{constructor(t){super(t)}},br=[0,Y,q,-1,j],bi=[0,Y,q,B];Uh.prototype.g=xn([0,Y,wr,[0,Y],mr,yr,br,bi]);var Bh=class extends p{constructor(t){super(t)}},L2=Ht(456383383,Bh);J[456383383]=[0,Y,xh];var Gh=class extends p{constructor(t){super(t)}},F2=Ht(476348187,Gh);J[476348187]=[0,Y,A2];var Vh=class extends p{constructor(t){super(t)}},Na=class extends p{constructor(t){super(t)}},Hh=[0,Dt,-1],R2=Ht(458105876,class extends p{constructor(t){super(t)}g(){var t=this.u;const e=0|t[v],s=2&e;return t=function(n,i,r){var a=Na;const o=2&i;let h=!1;if(r==null){if(o)return ma();r=[]}else if(r.constructor===Rt){if(!(2&r.L)||o)return r;r=r.X()}else Array.isArray(r)?h=!!(2&(0|r[v])):r=[];if(o){if(!r.length)return ma();h||(h=!0,is(r))}else h&&(h=!1,r=No(r));return h||(64&(0|r[v])?r[v]&=-33:32&i&&hn(r,32)),V(n,i,2,a=new Rt(r,a,H1,void 0)),a}(t,e,ue(t,e,2)),!s&&Na&&(t.ra=!0),t}});J[458105876]=[0,Hh,i2,[!0,we,[0,S,-1,it]]];var Er=class extends p{constructor(t){super(t)}},zh=Ht(458105758,Er);J[458105758]=[0,Y,S,Hh];var jh=class extends p{constructor(t){super(t)}},N2=Ht(443442058,jh);J[443442058]=[0,Y,S,j,q,it,-1,B,q],J[514774813]=br;var Wh=class extends p{constructor(t){super(t)}},D2=Ht(516587230,Wh);function Ei(t,e){return e=e?e.clone():new gr,t.displayNamesLocale!==void 0?R(e,1,as(t.displayNamesLocale)):t.displayNamesLocale===void 0&&R(e,1),t.maxResults!==void 0?qt(e,2,t.maxResults):"maxResults"in t&&R(e,2),t.scoreThreshold!==void 0?g(e,3,t.scoreThreshold):"scoreThreshold"in t&&R(e,3),t.categoryAllowlist!==void 0?en(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&R(e,4),t.categoryDenylist!==void 0?en(e,5,t.categoryDenylist):"categoryDenylist"in t&&R(e,5),e}function Ar(t,e=-1,s=""){return{categories:t.map(n=>({index:Ft(n,1)??0??-1,score:X(n,2)??0,categoryName:Nt(n,3)??""??"",displayName:Nt(n,4)??""??""})),headIndex:e,headName:s}}function Kh(t){var a,o;var e=Ie(t,3,Ee,ke()),s=Ie(t,2,rs,ke()),n=Ie(t,1,Je,ke()),i=Ie(t,9,Je,ke());const r={categories:[],keypoints:[]};for(let h=0;h<e.length;h++)r.categories.push({score:e[h],index:s[h]??-1,categoryName:n[h]??"",displayName:i[h]??""});if((e=(a=P(t,ii,4))==null?void 0:a.h())&&(r.boundingBox={originX:Ft(e,1)??0,originY:Ft(e,2)??0,width:Ft(e,3)??0,height:Ft(e,4)??0,angle:0}),(o=P(t,ii,4))==null?void 0:o.g().length)for(const h of P(t,ii,4).g())r.keypoints.push({x:Hs(h,1)??0,y:Hs(h,2)??0,score:Hs(h,4)??0,label:Nt(h,3)??""});return r}function kn(t){const e=[];for(const s of he(t,Eh,1))e.push({x:X(s,1)??0,y:X(s,2)??0,z:X(s,3)??0,visibility:X(s,4)??0});return e}function xs(t){const e=[];for(const s of he(t,bh,1))e.push({x:X(s,1)??0,y:X(s,2)??0,z:X(s,3)??0,visibility:X(s,4)??0});return e}function Da(t){return Array.from(t,e=>e>127?e-256:e)}function Oa(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let s=0,n=0,i=0;for(let r=0;r<t.length;r++)s+=t[r]*e[r],n+=t[r]*t[r],i+=e[r]*e[r];if(n<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return s/Math.sqrt(n*i)}let Bs;J[516587230]=[0,Y,br,bi,q],J[518928384]=bi;const O2=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Xh(){if(Bs===void 0)try{await WebAssembly.instantiate(O2),Bs=!0}catch{Bs=!1}return Bs}async function ys(t,e=l2``){const s=await Xh()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${s}.js`,wasmBinaryPath:`${e}/${t}_${s}.wasm`}}var Me=class{};function Yh(){var t=navigator;return typeof OffscreenCanvas<"u"&&(!function(e=navigator){return(e=e.userAgent).includes("Safari")&&!e.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function Ua(t){if(typeof importScripts!="function"){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise((s,n)=>{e.addEventListener("load",()=>{s()},!1),e.addEventListener("error",i=>{n(i)},!1),document.body.appendChild(e)})}importScripts(t.toString())}function $h(t){return t.videoWidth!==void 0?[t.videoWidth,t.videoHeight]:t.naturalWidth!==void 0?[t.naturalWidth,t.naturalHeight]:t.displayWidth!==void 0?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function y(t,e,s){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),s(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function Ba(t,e,s){if(!t.i.canvas)throw Error("No OpenGL canvas configured.");if(s?t.i._bindTextureToStream(s):t.i._bindTextureToCanvas(),!(s=t.i.canvas.getContext("webgl2")||t.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");t.i.gpuOriginForWebTexturesIsBottomLeft&&s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1);const[n,i]=$h(e);return!t.l||n===t.i.canvas.width&&i===t.i.canvas.height||(t.i.canvas.width=n,t.i.canvas.height=i),[n,i]}function Ga(t,e,s){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(e.length);for(let i=0;i<e.length;i++)n[i]=t.i.stringToNewUTF8(e[i]);e=t.i._malloc(4*n.length),t.i.HEAPU32.set(n,e>>2),s(e);for(const i of n)t.i._free(i);t.i._free(e)}function Kt(t,e,s){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=s}function de(t,e,s){let n=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(i,r,a)=>{r?(s(n,a),n=[]):n.push(i)}}Me.forVisionTasks=function(t){return ys("vision",t)},Me.forTextTasks=function(t){return ys("text",t)},Me.forGenAiExperimentalTasks=function(t){return ys("genai_experimental",t)},Me.forGenAiTasks=function(t){return ys("genai",t)},Me.forAudioTasks=function(t){return ys("audio",t)},Me.isSimdSupported=function(){return Xh()};async function U2(t,e,s,n){return t=await(async(i,r,a,o,h)=>{if(r&&await Ua(r),!self.ModuleFactory||a&&(await Ua(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&h&&((r=self.Module).locateFile=h.locateFile,h.mainScriptUrlOrBlob&&(r.mainScriptUrlOrBlob=h.mainScriptUrlOrBlob)),h=await self.ModuleFactory(self.Module||h),self.ModuleFactory=self.Module=void 0,new i(h,o)})(t,s.wasmLoaderPath,s.assetLoaderPath,e,{locateFile:i=>i.endsWith(".wasm")?s.wasmBinaryPath.toString():s.assetBinaryPath&&i.endsWith(".data")?s.assetBinaryPath.toString():i}),await t.o(n),t}function ri(t,e){const s=P(t.baseOptions,nn,1)||new nn;typeof e=="string"?(R(s,2,as(e)),R(s,1)):e instanceof Uint8Array&&(R(s,1,Di(e,!1)),R(s,2)),_(t.baseOptions,0,1,s)}function Va(t){try{const e=t.G.length;if(e===1)throw Error(t.G[0].message);if(e>1)throw Error("Encountered multiple errors: "+t.G.map(s=>s.message).join(", "))}finally{t.G=[]}}function f(t,e){t.B=Math.max(t.B,e)}function In(t,e){t.A=new rt,Tt(t.A,"PassThroughCalculator"),N(t.A,"free_memory"),x(t.A,"free_memory_unused_out"),D(e,"free_memory"),xt(e,t.A)}function ts(t,e){N(t.A,e),x(t.A,e+"_unused_out")}function Cn(t){t.g.addBoolToStream(!0,"free_memory",t.B)}var Ws=class{constructor(t){this.g=t,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){var s,n,i,r,a,o;if(e){const h=t.baseOptions||{};if((s=t.baseOptions)!=null&&s.modelAssetBuffer&&((n=t.baseOptions)!=null&&n.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((i=P(this.baseOptions,nn,1))!=null&&i.g()||(r=P(this.baseOptions,nn,1))!=null&&r.h()||(a=t.baseOptions)!=null&&a.modelAssetBuffer||(o=t.baseOptions)!=null&&o.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(c,l){let u=P(c.baseOptions,Fa,3);if(!u){var w=u=new Fa,O=new Ma;As(w,4,js,O)}"delegate"in l&&(l.delegate==="GPU"?(l=u,w=new u2,As(l,2,js,w)):(l=u,w=new Ma,As(l,4,js,w))),_(c.baseOptions,0,3,u)}(this,h),h.modelAssetPath)return fetch(h.modelAssetPath.toString()).then(c=>{if(c.ok)return c.arrayBuffer();throw Error(`Failed to fetch model: ${h.modelAssetPath} (${c.status})`)}).then(c=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(c),!0,!1,!1),ri(this,"/model.dat"),this.m(),this.I()});if(h.modelAssetBuffer instanceof Uint8Array)ri(this,h.modelAssetBuffer);else if(h.modelAssetBuffer)return async function(c){const l=[];for(var u=0;;){const{done:w,value:O}=await c.read();if(w)break;l.push(O),u+=O.length}if(l.length===0)return new Uint8Array(0);if(l.length===1)return l[0];c=new Uint8Array(u),u=0;for(const w of l)c.set(w,u),u+=w.length;return c}(h.modelAssetBuffer).then(c=>{ri(this,c),this.m(),this.I()})}return this.m(),this.I(),Promise.resolve()}I(){}da(){let t;if(this.g.da(e=>{t=f2(e)}),!t)throw Error("Failed to retrieve CalculatorGraphConfig");return t}setGraph(t,e){this.g.attachErrorListener((s,n)=>{this.G.push(Error(n))}),this.g.La(),this.g.setGraph(t,e),this.A=void 0,Va(this)}finishProcessing(){this.g.finishProcessing(),Va(this)}close(){this.A=void 0,this.g.closeGraph()}};function oe(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}Ws.prototype.close=Ws.prototype.close,function(t,e){t=t.split(".");var s,n=Se;for((t[0]in n)||n.execScript===void 0||n.execScript("var "+t[0]);t.length&&(s=t.shift());)t.length||e===void 0?n=n[s]&&n[s]!==Object.prototype[s]?n[s]:n[s]={}:n[s]=e}("TaskRunner",Ws);class B2{constructor(e,s,n,i){this.g=e,this.h=s,this.m=n,this.l=i}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Ha(t,e,s){const n=t.g;if(s=oe(n.createShader(s),"Failed to create WebGL shader"),n.shaderSource(s,e),n.compileShader(s),!n.getShaderParameter(s,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(s)}`);return n.attachShader(t.h,s),s}function za(t,e){const s=t.g,n=oe(s.createVertexArray(),"Failed to create vertex array");s.bindVertexArray(n);const i=oe(s.createBuffer(),"Failed to create buffer");s.bindBuffer(s.ARRAY_BUFFER,i),s.enableVertexAttribArray(t.O),s.vertexAttribPointer(t.O,2,s.FLOAT,!1,0,0),s.bufferData(s.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),s.STATIC_DRAW);const r=oe(s.createBuffer(),"Failed to create buffer");return s.bindBuffer(s.ARRAY_BUFFER,r),s.enableVertexAttribArray(t.I),s.vertexAttribPointer(t.I,2,s.FLOAT,!1,0,0),s.bufferData(s.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindVertexArray(null),new B2(s,n,i,r)}function Tr(t,e){if(t.g){if(e!==t.g)throw Error("Cannot change GL context once initialized")}else t.g=e}function xr(t,e,s,n){return Tr(t,e),t.h||(t.m(),t.C()),s?(t.s||(t.s=za(t,!0)),s=t.s):(t.v||(t.v=za(t,!1)),s=t.v),e.useProgram(t.h),s.bind(),t.l(),t=n(),s.g.bindVertexArray(null),t}function Sn(t,e,s){return Tr(t,e),t=oe(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function Ln(t,e,s){Tr(t,e),t.A||(t.A=oe(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,t.A),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0)}function Pr(t){var e;(e=t.g)==null||e.bindFramebuffer(t.g.FRAMEBUFFER,null)}var Mr=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const t=this.g;if(this.h=oe(t.createProgram(),"Failed to create WebGL program"),this.aa=Ha(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,t.VERTEX_SHADER),this.Z=Ha(this,this.G(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.O=t.getAttribLocation(this.h,"aVertex"),this.I=t.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.aa),t.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function ne(t,e){switch(e){case 0:return t.g.find(s=>s instanceof Uint8Array);case 1:return t.g.find(s=>s instanceof Float32Array);case 2:return t.g.find(s=>typeof WebGLTexture<"u"&&s instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function Ai(t){var e=ne(t,1);if(!e){if(e=ne(t,0))e=new Float32Array(e).map(n=>n/255);else{e=new Float32Array(t.width*t.height);const n=es(t);var s=kr(t);if(Ln(s,n,qh(t)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){s=new Float32Array(t.width*t.height*4),n.readPixels(0,0,t.width,t.height,n.RGBA,n.FLOAT,s);for(let i=0,r=0;i<e.length;++i,r+=4)e[i]=s[r]}else n.readPixels(0,0,t.width,t.height,n.RED,n.FLOAT,e)}t.g.push(e)}return e}function qh(t){let e=ne(t,2);if(!e){const s=es(t);e=Zh(t);const n=Ai(t),i=Jh(t);s.texImage2D(s.TEXTURE_2D,0,i,t.width,t.height,0,s.RED,s.FLOAT,n),Ti(t)}return e}function es(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=oe(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function Jh(t){if(t=es(t),!Gs)if(t.getExtension("EXT_color_buffer_float")&&t.getExtension("OES_texture_float_linear")&&t.getExtension("EXT_float_blend"))Gs=t.R32F;else{if(!t.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Gs=t.R16F}return Gs}function kr(t){return t.l||(t.l=new Mr),t.l}function Zh(t){const e=es(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let s=ne(t,2);return s||(s=Sn(kr(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(s),t.j=!0),e.bindTexture(e.TEXTURE_2D,s),s}function Ti(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var Gs,Q=class{constructor(t,e,s,n,i,r,a){this.g=t,this.m=e,this.j=s,this.canvas=n,this.l=i,this.width=r,this.height=a,this.j&&--ja===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!ne(this,0)}ja(){return!!ne(this,1)}P(){return!!ne(this,2)}ia(){return(e=ne(t=this,0))||(e=Ai(t),e=new Uint8Array(e.map(s=>255*s)),t.g.push(e)),e;var t,e}ha(){return Ai(this)}M(){return qh(this)}clone(){const t=[];for(const e of this.g){let s;if(e instanceof Uint8Array)s=new Uint8Array(e);else if(e instanceof Float32Array)s=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const n=es(this),i=kr(this);n.activeTexture(n.TEXTURE1),s=Sn(i,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,s);const r=Jh(this);n.texImage2D(n.TEXTURE_2D,0,r,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),Ln(i,n,s),xr(i,n,!1,()=>{Zh(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Ti(this)}),Pr(i),Ti(this)}}t.push(s)}return new Q(t,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&es(this).deleteTexture(ne(this,2)),ja=-1}};Q.prototype.close=Q.prototype.close,Q.prototype.clone=Q.prototype.clone,Q.prototype.getAsWebGLTexture=Q.prototype.M,Q.prototype.getAsFloat32Array=Q.prototype.ha,Q.prototype.getAsUint8Array=Q.prototype.ia,Q.prototype.hasWebGLTexture=Q.prototype.P,Q.prototype.hasFloat32Array=Q.prototype.ja,Q.prototype.hasUint8Array=Q.prototype.Fa;var ja=250;function $t(t,e){switch(e){case 0:return t.g.find(s=>s instanceof ImageData);case 1:return t.g.find(s=>typeof ImageBitmap<"u"&&s instanceof ImageBitmap);case 2:return t.g.find(s=>typeof WebGLTexture<"u"&&s instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function Qh(t){var e=$t(t,0);if(!e){e=ss(t);const s=Fn(t),n=new Uint8Array(t.width*t.height*4);Ln(s,e,Ks(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,n),Pr(s),e=new ImageData(new Uint8ClampedArray(n.buffer),t.width,t.height),t.g.push(e)}return e}function Ks(t){let e=$t(t,2);if(!e){const s=ss(t);e=Xs(t);const n=$t(t,1)||Qh(t);s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,n),bs(t)}return e}function ss(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=oe(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function Fn(t){return t.l||(t.l=new Mr),t.l}function Xs(t){const e=ss(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let s=$t(t,2);return s||(s=Sn(Fn(t),e),t.g.push(s),t.m=!0),e.bindTexture(e.TEXTURE_2D,s),s}function bs(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function Wa(t){const e=ss(t);return xr(Fn(t),e,!0,()=>function(s,n){const i=s.canvas;if(i.width===s.width&&i.height===s.height)return n();const r=i.width,a=i.height;return i.width=s.width,i.height=s.height,s=n(),i.width=r,i.height=a,s}(t,()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return t.canvas.transferToImageBitmap()}))}var tt=class{constructor(t,e,s,n,i,r,a){this.g=t,this.j=e,this.m=s,this.canvas=n,this.l=i,this.width=r,this.height=a,(this.j||this.m)&&--Ka===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!$t(this,0)}ka(){return!!$t(this,1)}P(){return!!$t(this,2)}Ca(){return Qh(this)}Ba(){var t=$t(this,1);return t||(Ks(this),Xs(this),t=Wa(this),bs(this),this.g.push(t),this.j=!0),t}M(){return Ks(this)}clone(){const t=[];for(const e of this.g){let s;if(e instanceof ImageData)s=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const n=ss(this),i=Fn(this);n.activeTexture(n.TEXTURE1),s=Sn(i,n),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),Ln(i,n,s),xr(i,n,!1,()=>{Xs(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),bs(this)}),Pr(i),bs(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);Ks(this),Xs(this),s=Wa(this),bs(this)}t.push(s)}return new tt(t,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&$t(this,1).close(),this.m&&ss(this).deleteTexture($t(this,2)),Ka=-1}};tt.prototype.close=tt.prototype.close,tt.prototype.clone=tt.prototype.clone,tt.prototype.getAsWebGLTexture=tt.prototype.M,tt.prototype.getAsImageBitmap=tt.prototype.Ba,tt.prototype.getAsImageData=tt.prototype.Ca,tt.prototype.hasWebGLTexture=tt.prototype.P,tt.prototype.hasImageBitmap=tt.prototype.ka,tt.prototype.hasImageData=tt.prototype.Ea;var Ka=250;function zt(...t){return t.map(([e,s])=>({start:e,end:s}))}const G2=function(t){return class extends t{La(){this.i._registerModelResourcesGraphService()}}}((Xa=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",e!==void 0?this.i.canvas=e:Yh()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph(new TextEncoder().encode(t),!1)}setGraph(t,e){const s=t.length,n=this.i._malloc(s);this.i.HEAPU8.set(t,n),e?this.i._changeBinaryGraph(s,n):this.i._changeTextGraph(s,n),this.i._free(n)}configureAudio(t,e,s,n,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),y(this,n||"input_audio",r=>{y(this,i=i||"audio_header",a=>{this.i._configureAudio(r,a,t,e??0,s)})})}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}da(t){Kt(this,"__graph_config__",e=>{t(e)}),y(this,"__graph_config__",e=>{this.i._getGraphConfig(e,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,s){this.addAudioToStreamWithShape(t,0,0,e,s)}addAudioToStreamWithShape(t,e,s,n,i){const r=4*t.length;this.h!==r&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(r),this.h=r),this.i.HEAPF32.set(t,this.g/4),y(this,n,a=>{this.i._addAudioToInputStream(this.g,e,s,a,i)})}addGpuBufferToStream(t,e,s){y(this,e,n=>{const[i,r]=Ba(this,t,n);this.i._addBoundTextureToStream(n,i,r,s)})}addBoolToStream(t,e,s){y(this,e,n=>{this.i._addBoolToInputStream(t,n,s)})}addDoubleToStream(t,e,s){y(this,e,n=>{this.i._addDoubleToInputStream(t,n,s)})}addFloatToStream(t,e,s){y(this,e,n=>{this.i._addFloatToInputStream(t,n,s)})}addIntToStream(t,e,s){y(this,e,n=>{this.i._addIntToInputStream(t,n,s)})}addUintToStream(t,e,s){y(this,e,n=>{this.i._addUintToInputStream(t,n,s)})}addStringToStream(t,e,s){y(this,e,n=>{y(this,t,i=>{this.i._addStringToInputStream(i,n,s)})})}addStringRecordToStream(t,e,s){y(this,e,n=>{Ga(this,Object.keys(t),i=>{Ga(this,Object.values(t),r=>{this.i._addFlatHashMapToInputStream(i,r,Object.keys(t).length,n,s)})})})}addProtoToStream(t,e,s,n){y(this,s,i=>{y(this,e,r=>{const a=this.i._malloc(t.length);this.i.HEAPU8.set(t,a),this.i._addProtoToInputStream(a,t.length,r,i,n),this.i._free(a)})})}addEmptyPacketToStream(t,e){y(this,t,s=>{this.i._addEmptyPacketToInputStream(s,e)})}addBoolVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateBoolVector(t.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const r of t)this.i._addBoolVectorEntry(i,r);this.i._addBoolVectorToInputStream(i,n,s)})}addDoubleVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateDoubleVector(t.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const r of t)this.i._addDoubleVectorEntry(i,r);this.i._addDoubleVectorToInputStream(i,n,s)})}addFloatVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateFloatVector(t.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const r of t)this.i._addFloatVectorEntry(i,r);this.i._addFloatVectorToInputStream(i,n,s)})}addIntVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateIntVector(t.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const r of t)this.i._addIntVectorEntry(i,r);this.i._addIntVectorToInputStream(i,n,s)})}addUintVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateUintVector(t.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of t)this.i._addUintVectorEntry(i,r);this.i._addUintVectorToInputStream(i,n,s)})}addStringVectorToStream(t,e,s){y(this,e,n=>{const i=this.i._allocateStringVector(t.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const r of t)y(this,r,a=>{this.i._addStringVectorEntry(i,a)});this.i._addStringVectorToInputStream(i,n,s)})}addBoolToInputSidePacket(t,e){y(this,e,s=>{this.i._addBoolToInputSidePacket(t,s)})}addDoubleToInputSidePacket(t,e){y(this,e,s=>{this.i._addDoubleToInputSidePacket(t,s)})}addFloatToInputSidePacket(t,e){y(this,e,s=>{this.i._addFloatToInputSidePacket(t,s)})}addIntToInputSidePacket(t,e){y(this,e,s=>{this.i._addIntToInputSidePacket(t,s)})}addUintToInputSidePacket(t,e){y(this,e,s=>{this.i._addUintToInputSidePacket(t,s)})}addStringToInputSidePacket(t,e){y(this,e,s=>{y(this,t,n=>{this.i._addStringToInputSidePacket(n,s)})})}addProtoToInputSidePacket(t,e,s){y(this,s,n=>{y(this,e,i=>{const r=this.i._malloc(t.length);this.i.HEAPU8.set(t,r),this.i._addProtoToInputSidePacket(r,t.length,i,n),this.i._free(r)})})}addBoolVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateBoolVector(t.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const i of t)this.i._addBoolVectorEntry(n,i);this.i._addBoolVectorToInputSidePacket(n,s)})}addDoubleVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateDoubleVector(t.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const i of t)this.i._addDoubleVectorEntry(n,i);this.i._addDoubleVectorToInputSidePacket(n,s)})}addFloatVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateFloatVector(t.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const i of t)this.i._addFloatVectorEntry(n,i);this.i._addFloatVectorToInputSidePacket(n,s)})}addIntVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateIntVector(t.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const i of t)this.i._addIntVectorEntry(n,i);this.i._addIntVectorToInputSidePacket(n,s)})}addUintVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateUintVector(t.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const i of t)this.i._addUintVectorEntry(n,i);this.i._addUintVectorToInputSidePacket(n,s)})}addStringVectorToInputSidePacket(t,e){y(this,e,s=>{const n=this.i._allocateStringVector(t.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const i of t)y(this,i,r=>{this.i._addStringVectorEntry(n,r)});this.i._addStringVectorToInputSidePacket(n,s)})}attachBoolListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachBoolListener(s)})}attachBoolVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachBoolVectorListener(s)})}attachIntListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachIntListener(s)})}attachIntVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachIntVectorListener(s)})}attachUintListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachUintListener(s)})}attachUintVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachUintVectorListener(s)})}attachDoubleListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachDoubleListener(s)})}attachDoubleVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachDoubleVectorListener(s)})}attachFloatListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachFloatListener(s)})}attachFloatVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachFloatVectorListener(s)})}attachStringListener(t,e){Kt(this,t,e),y(this,t,s=>{this.i._attachStringListener(s)})}attachStringVectorListener(t,e){de(this,t,e),y(this,t,s=>{this.i._attachStringVectorListener(s)})}attachProtoListener(t,e,s){Kt(this,t,e),y(this,t,n=>{this.i._attachProtoListener(n,s||!1)})}attachProtoVectorListener(t,e,s){de(this,t,e),y(this,t,n=>{this.i._attachProtoVectorListener(n,s||!1)})}attachAudioListener(t,e,s){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Kt(this,t,(n,i)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),e(n,i)}),y(this,t,n=>{this.i._attachAudioListener(n,s||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Xa{get ea(){return this.i}qa(t,e,s){y(this,e,n=>{const[i,r]=Ba(this,t,n);this.ea._addBoundTextureAsImageToStream(n,i,r,s)})}U(t,e){Kt(this,t,e),y(this,t,s=>{this.ea._attachImageListener(s)})}ca(t,e){de(this,t,e),y(this,t,s=>{this.ea._attachImageVectorListener(s)})}}));var Xa,Ot=class extends G2{};async function T(t,e,s){return async function(n,i,r,a){return U2(n,i,r,a)}(t,s.canvas??(Yh()?void 0:document.createElement("canvas")),e,s)}function tc(t,e,s,n){if(t.T){const r=new Ah;if(s!=null&&s.regionOfInterest){if(!t.pa)throw Error("This task doesn't support region-of-interest.");var i=s.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error("Expected RectF values to be in [0,1].");g(r,1,(i.left+i.right)/2),g(r,2,(i.top+i.bottom)/2),g(r,4,i.right-i.left),g(r,3,i.bottom-i.top)}else g(r,1,.5),g(r,2,.5),g(r,4,1),g(r,3,1);if(s!=null&&s.rotationDegrees){if((s==null?void 0:s.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90Â°.");if(g(r,5,-Math.PI*s.rotationDegrees/180),(s==null?void 0:s.rotationDegrees)%180!=0){const[a,o]=$h(e);s=X(r,3)*o/a,i=X(r,4)*a/o,g(r,4,s),g(r,3,i)}}t.g.addProtoToStream(r.g(),"mediapipe.NormalizedRect",t.T,n)}t.g.qa(e,t.aa,n??performance.now()),t.finishProcessing()}function Ut(t,e,s){var n;if((n=t.baseOptions)!=null&&n.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");tc(t,e,s,t.B+1)}function Jt(t,e,s,n){var i;if(!((i=t.baseOptions)!=null&&i.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");tc(t,e,s,n)}function ns(t,e,s,n){var i=e.data;const r=e.width,a=r*(e=e.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==a)throw Error("Unsupported channel count: "+i.length/a);return t=new Q([i],s,!1,t.g.i.canvas,t.O,r,e),n?t.clone():t}var pt=class extends Ws{constructor(t,e,s,n){super(t),this.g=t,this.aa=e,this.T=s,this.pa=n,this.O=new Mr}l(t,e=!0){if("runningMode"in t&&ks(this.baseOptions,2,!!t.runningMode&&t.runningMode!=="IMAGE"),t.canvas!==void 0&&this.g.i.canvas!==t.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(t,e)}close(){this.O.close(),super.close()}};pt.prototype.close=pt.prototype.close;var kt=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect_in",!1),this.j={detections:[]},_(t=this.h=new Mn,0,1,e=new G),g(this.h,2,.5),g(this.h,3,.3)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return"minDetectionConfidence"in t&&g(this.h,2,t.minDetectionConfidence??.5),"minSuppressionThreshold"in t&&g(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}D(t,e){return this.j={detections:[]},Ut(this,t,e),this.j}F(t,e,s){return this.j={detections:[]},Jt(this,t,s,e),this.j}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect_in"),I(t,"detections");const e=new Et;Gt(e,T2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect_in"),x(s,"DETECTIONS:detections"),s.o(e),xt(t,s),this.g.attachProtoVectorListener("detections",(n,i)=>{for(const r of n)n=wh(r),this.j.detections.push(Kh(n));f(this,i)}),this.g.attachEmptyPacketListener("detections",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};kt.prototype.detectForVideo=kt.prototype.F,kt.prototype.detect=kt.prototype.D,kt.prototype.setOptions=kt.prototype.o,kt.createFromModelPath=async function(t,e){return T(kt,t,{baseOptions:{modelAssetPath:e}})},kt.createFromModelBuffer=function(t,e){return T(kt,t,{baseOptions:{modelAssetBuffer:e}})},kt.createFromOptions=function(t,e){return T(kt,t,e)};var Ir=zt([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Cr=zt([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Sr=zt([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),ec=zt([474,475],[475,476],[476,477],[477,474]),Lr=zt([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Fr=zt([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),sc=zt([469,470],[470,471],[471,472],[472,469]),Rr=zt([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),nc=[...Ir,...Cr,...Sr,...Lr,...Fr,...Rr],ic=zt([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Ya(t){t.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var H=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,_(t=this.h=new kh,0,1,e=new G),this.v=new Mh,_(this.h,0,3,this.v),this.s=new Mn,_(this.h,0,2,this.s),qt(this.s,4,1),g(this.s,2,.5),g(this.v,2,.5),g(this.h,4,.5)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return"numFaces"in t&&qt(this.s,4,t.numFaces??1),"minFaceDetectionConfidence"in t&&g(this.s,2,t.minFaceDetectionConfidence??.5),"minTrackingConfidence"in t&&g(this.h,4,t.minTrackingConfidence??.5),"minFacePresenceConfidence"in t&&g(this.v,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}D(t,e){return Ya(this),Ut(this,t,e),this.j}F(t,e,s){return Ya(this),Jt(this,t,s,e),this.j}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"face_landmarks");const e=new Et;Gt(e,P2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"NORM_LANDMARKS:face_landmarks"),s.o(e),xt(t,s),this.g.attachProtoVectorListener("face_landmarks",(n,i)=>{for(const r of n)n=Rs(r),this.j.faceLandmarks.push(kn(n));f(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",n=>{f(this,n)}),this.outputFaceBlendshapes&&(I(t,"blendshapes"),x(s,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(n,i)=>{if(this.outputFaceBlendshapes)for(const r of n)n=Pn(r),this.j.faceBlendshapes.push(Ar(n.g()??[]));f(this,i)}),this.g.attachEmptyPacketListener("blendshapes",n=>{f(this,n)})),this.outputFacialTransformationMatrixes&&(I(t,"face_geometry"),x(s,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(n,i)=>{if(this.outputFacialTransformationMatrixes)for(const r of n)(n=P(x2(r),m2,2))&&this.j.facialTransformationMatrixes.push({rows:Ft(n,1)??0??0,columns:Ft(n,2)??0??0,data:Ie(n,3,Ee,ke()).slice()??[]});f(this,i)}),this.g.attachEmptyPacketListener("face_geometry",n=>{f(this,n)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};H.prototype.detectForVideo=H.prototype.F,H.prototype.detect=H.prototype.D,H.prototype.setOptions=H.prototype.o,H.createFromModelPath=function(t,e){return T(H,t,{baseOptions:{modelAssetPath:e}})},H.createFromModelBuffer=function(t,e){return T(H,t,{baseOptions:{modelAssetBuffer:e}})},H.createFromOptions=function(t,e){return T(H,t,e)},H.FACE_LANDMARKS_LIPS=Ir,H.FACE_LANDMARKS_LEFT_EYE=Cr,H.FACE_LANDMARKS_LEFT_EYEBROW=Sr,H.FACE_LANDMARKS_LEFT_IRIS=ec,H.FACE_LANDMARKS_RIGHT_EYE=Lr,H.FACE_LANDMARKS_RIGHT_EYEBROW=Fr,H.FACE_LANDMARKS_RIGHT_IRIS=sc,H.FACE_LANDMARKS_FACE_OVAL=Rr,H.FACE_LANDMARKS_CONTOURS=nc,H.FACE_LANDMARKS_TESSELATION=ic;var Xt=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!0),_(t=this.j=new Ch,0,1,e=new G)}get baseOptions(){return P(this.j,G,1)}set baseOptions(t){_(this.j,0,1,t)}o(t){return super.l(t)}Oa(t,e,s){const n=typeof e!="function"?e:{};if(this.h=typeof e=="function"?e:s,Ut(this,t,n??{}),!this.h)return this.s}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"stylized_image");const e=new Et;Gt(e,M2,this.j);const s=new rt;Tt(s,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"STYLIZED_IMAGE:stylized_image"),s.o(e),xt(t,s),this.g.U("stylized_image",(n,i)=>{var r=!this.h,a=n.data,o=n.width;const h=o*(n=n.height);if(a instanceof Uint8Array)if(a.length===3*h){const c=new Uint8ClampedArray(4*h);for(let l=0;l<h;++l)c[4*l]=a[3*l],c[4*l+1]=a[3*l+1],c[4*l+2]=a[3*l+2],c[4*l+3]=255;a=new ImageData(c,o,n)}else{if(a.length!==4*h)throw Error("Unsupported channel count: "+a.length/h);a=new ImageData(new Uint8ClampedArray(a.buffer,a.byteOffset,a.length),o,n)}else if(!(a instanceof WebGLTexture))throw Error(`Unsupported format: ${a.constructor.name}`);o=new tt([a],!1,!1,this.g.i.canvas,this.O,o,n),this.s=r=r?o.clone():o,this.h&&this.h(r),f(this,i)}),this.g.attachEmptyPacketListener("stylized_image",n=>{this.s=null,this.h&&this.h(null),f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Xt.prototype.stylize=Xt.prototype.Oa,Xt.prototype.setOptions=Xt.prototype.o,Xt.createFromModelPath=function(t,e){return T(Xt,t,{baseOptions:{modelAssetPath:e}})},Xt.createFromModelBuffer=function(t,e){return T(Xt,t,{baseOptions:{modelAssetBuffer:e}})},Xt.createFromOptions=function(t,e){return T(Xt,t,e)};var Nr=zt([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function $a(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function qa(t){return t.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function Ja(t,e=!0){const s=[];for(const i of t){var n=Pn(i);t=[];for(const r of n.g())n=e&&Ft(r,1)!=null?Ft(r,1)??0:-1,t.push({score:X(r,2)??0,index:n,categoryName:Nt(r,3)??""??"",displayName:Nt(r,4)??""??""});s.push(t)}return s}var _t=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],_(t=this.j=new Fh,0,1,e=new G),this.s=new _r,_(this.j,0,2,this.s),this.C=new vr,_(this.s,0,3,this.C),this.v=new Lh,_(this.s,0,2,this.v),this.h=new k2,_(this.j,0,3,this.h),g(this.v,2,.5),g(this.s,4,.5),g(this.C,2,.5)}get baseOptions(){return P(this.j,G,1)}set baseOptions(t){_(this.j,0,1,t)}o(t){var i,r,a,o;if(qt(this.v,3,t.numHands??1),"minHandDetectionConfidence"in t&&g(this.v,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&g(this.s,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&g(this.C,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new Ge,s=e,n=Ei(t.cannedGesturesClassifierOptions,(i=P(this.h,Ge,3))==null?void 0:i.h());_(s,0,2,n),_(this.h,0,3,e)}else t.cannedGesturesClassifierOptions===void 0&&((r=P(this.h,Ge,3))==null||r.g());return t.customGesturesClassifierOptions?(_(s=e=new Ge,0,2,n=Ei(t.customGesturesClassifierOptions,(a=P(this.h,Ge,4))==null?void 0:a.h())),_(this.h,0,4,e)):t.customGesturesClassifierOptions===void 0&&((o=P(this.h,Ge,4))==null||o.g()),this.l(t)}Ja(t,e){return $a(this),Ut(this,t,e),qa(this)}Ka(t,e,s){return $a(this),Jt(this,t,s,e),qa(this)}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"hand_gestures"),I(t,"hand_landmarks"),I(t,"world_hand_landmarks"),I(t,"handedness");const e=new Et;Gt(e,I2,this.j);const s=new rt;Tt(s,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"HAND_GESTURES:hand_gestures"),x(s,"LANDMARKS:hand_landmarks"),x(s,"WORLD_LANDMARKS:world_hand_landmarks"),x(s,"HANDEDNESS:handedness"),s.o(e),xt(t,s),this.g.attachProtoVectorListener("hand_landmarks",(n,i)=>{for(const r of n){n=Rs(r);const a=[];for(const o of he(n,Eh,1))a.push({x:X(o,1)??0,y:X(o,2)??0,z:X(o,3)??0,visibility:X(o,4)??0});this.landmarks.push(a)}f(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{f(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,i)=>{for(const r of n){n=Xe(r);const a=[];for(const o of he(n,bh,1))a.push({x:X(o,1)??0,y:X(o,2)??0,z:X(o,3)??0,visibility:X(o,4)??0});this.worldLandmarks.push(a)}f(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{f(this,n)}),this.g.attachProtoVectorListener("hand_gestures",(n,i)=>{this.gestures.push(...Ja(n,!1)),f(this,i)}),this.g.attachEmptyPacketListener("hand_gestures",n=>{f(this,n)}),this.g.attachProtoVectorListener("handedness",(n,i)=>{this.handedness.push(...Ja(n)),f(this,i)}),this.g.attachEmptyPacketListener("handedness",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function Za(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}_t.prototype.recognizeForVideo=_t.prototype.Ka,_t.prototype.recognize=_t.prototype.Ja,_t.prototype.setOptions=_t.prototype.o,_t.createFromModelPath=function(t,e){return T(_t,t,{baseOptions:{modelAssetPath:e}})},_t.createFromModelBuffer=function(t,e){return T(_t,t,{baseOptions:{modelAssetBuffer:e}})},_t.createFromOptions=function(t,e){return T(_t,t,e)},_t.HAND_CONNECTIONS=Nr;var ft=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],_(t=this.h=new _r,0,1,e=new G),this.s=new vr,_(this.h,0,3,this.s),this.j=new Lh,_(this.h,0,2,this.j),qt(this.j,3,1),g(this.j,2,.5),g(this.s,2,.5),g(this.h,4,.5)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return"numHands"in t&&qt(this.j,3,t.numHands??1),"minHandDetectionConfidence"in t&&g(this.j,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&g(this.h,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&g(this.s,2,t.minHandPresenceConfidence??.5),this.l(t)}D(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ut(this,t,e),Za(this)}F(t,e,s){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Jt(this,t,s,e),Za(this)}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"hand_landmarks"),I(t,"world_hand_landmarks"),I(t,"handedness");const e=new Et;Gt(e,C2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"LANDMARKS:hand_landmarks"),x(s,"WORLD_LANDMARKS:world_hand_landmarks"),x(s,"HANDEDNESS:handedness"),s.o(e),xt(t,s),this.g.attachProtoVectorListener("hand_landmarks",(n,i)=>{for(const r of n)n=Rs(r),this.landmarks.push(kn(n));f(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{f(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,i)=>{for(const r of n)n=Xe(r),this.worldLandmarks.push(xs(n));f(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{f(this,n)}),this.g.attachProtoVectorListener("handedness",(n,i)=>{var r=this.handedness,a=r.push;const o=[];for(const h of n){n=Pn(h);const c=[];for(const l of n.g())c.push({score:X(l,2)??0,index:Ft(l,1)??0??-1,categoryName:Nt(l,3)??""??"",displayName:Nt(l,4)??""??""});o.push(c)}a.call(r,...o),f(this,i)}),this.g.attachEmptyPacketListener("handedness",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ft.prototype.detectForVideo=ft.prototype.F,ft.prototype.detect=ft.prototype.D,ft.prototype.setOptions=ft.prototype.o,ft.createFromModelPath=function(t,e){return T(ft,t,{baseOptions:{modelAssetPath:e}})},ft.createFromModelBuffer=function(t,e){return T(ft,t,{baseOptions:{modelAssetBuffer:e}})},ft.createFromOptions=function(t,e){return T(ft,t,e)},ft.HAND_CONNECTIONS=Nr;var rc=zt([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Qa(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function to(t){try{if(!t.C)return t.h;t.C(t.h)}finally{Cn(t)}}function Vs(t,e){t=Rs(t),e.push(kn(t))}var U=class extends pt{constructor(t,e){super(new Ot(t,e),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,_(t=this.j=new Uh,0,1,e=new G),this.J=new vr,_(this.j,0,2,this.J),this.Z=new S2,_(this.j,0,3,this.Z),this.s=new Mn,_(this.j,0,4,this.s),this.H=new Mh,_(this.j,0,5,this.H),this.v=new Dh,_(this.j,0,6,this.v),this.K=new Oh,_(this.j,0,7,this.K),g(this.s,2,.5),g(this.s,3,.3),g(this.H,2,.5),g(this.v,2,.5),g(this.v,3,.3),g(this.K,2,.5),g(this.J,2,.5)}get baseOptions(){return P(this.j,G,1)}set baseOptions(t){_(this.j,0,1,t)}o(t){return"minFaceDetectionConfidence"in t&&g(this.s,2,t.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in t&&g(this.s,3,t.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in t&&g(this.H,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"minPoseDetectionConfidence"in t&&g(this.v,2,t.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in t&&g(this.v,3,t.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in t&&g(this.K,2,t.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in t&&g(this.J,2,t.minHandLandmarksConfidence??.5),this.l(t)}D(t,e,s){const n=typeof e!="function"?e:{};return this.C=typeof e=="function"?e:s,Qa(this),Ut(this,t,n),to(this)}F(t,e,s,n){const i=typeof s!="function"?s:{};return this.C=typeof s=="function"?s:n,Qa(this),Jt(this,t,i,e),to(this)}m(){var t=new gt;D(t,"input_frames_image"),I(t,"pose_landmarks"),I(t,"pose_world_landmarks"),I(t,"face_landmarks"),I(t,"left_hand_landmarks"),I(t,"left_hand_world_landmarks"),I(t,"right_hand_landmarks"),I(t,"right_hand_world_landmarks");const e=new Et,s=new Aa;mi(s,1,as("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(i,r){if(r!=null)if(Array.isArray(r))R(i,2,Lo(r));else{if(!(typeof r=="string"||r instanceof re||Cs(r)))throw Error("invalid value in Any.value field: "+r+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");mi(i,2,Di(r,!1),Le())}}(s,this.j.g());const n=new rt;Tt(n,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),tn(n,8,Aa,s),N(n,"IMAGE:input_frames_image"),x(n,"POSE_LANDMARKS:pose_landmarks"),x(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),x(n,"FACE_LANDMARKS:face_landmarks"),x(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),x(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),x(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),x(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(e),xt(t,n),In(this,t),this.g.attachProtoListener("pose_landmarks",(i,r)=>{Vs(i,this.h.poseLandmarks),f(this,r)}),this.g.attachEmptyPacketListener("pose_landmarks",i=>{f(this,i)}),this.g.attachProtoListener("pose_world_landmarks",(i,r)=>{var a=this.h.poseWorldLandmarks;i=Xe(i),a.push(xs(i)),f(this,r)}),this.g.attachEmptyPacketListener("pose_world_landmarks",i=>{f(this,i)}),this.outputPoseSegmentationMasks&&(x(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),ts(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",(i,r)=>{this.h.poseSegmentationMasks=[ns(this,i,!0,!this.C)],f(this,r)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",i=>{this.h.poseSegmentationMasks=[],f(this,i)})),this.g.attachProtoListener("face_landmarks",(i,r)=>{Vs(i,this.h.faceLandmarks),f(this,r)}),this.g.attachEmptyPacketListener("face_landmarks",i=>{f(this,i)}),this.outputFaceBlendshapes&&(I(t,"extra_blendshapes"),x(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(i,r)=>{var a=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(i=Pn(i),a.push(Ar(i.g()??[]))),f(this,r)}),this.g.attachEmptyPacketListener("extra_blendshapes",i=>{f(this,i)})),this.g.attachProtoListener("left_hand_landmarks",(i,r)=>{Vs(i,this.h.leftHandLandmarks),f(this,r)}),this.g.attachEmptyPacketListener("left_hand_landmarks",i=>{f(this,i)}),this.g.attachProtoListener("left_hand_world_landmarks",(i,r)=>{var a=this.h.leftHandWorldLandmarks;i=Xe(i),a.push(xs(i)),f(this,r)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",i=>{f(this,i)}),this.g.attachProtoListener("right_hand_landmarks",(i,r)=>{Vs(i,this.h.rightHandLandmarks),f(this,r)}),this.g.attachEmptyPacketListener("right_hand_landmarks",i=>{f(this,i)}),this.g.attachProtoListener("right_hand_world_landmarks",(i,r)=>{var a=this.h.rightHandWorldLandmarks;i=Xe(i),a.push(xs(i)),f(this,r)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",i=>{f(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};U.prototype.detectForVideo=U.prototype.F,U.prototype.detect=U.prototype.D,U.prototype.setOptions=U.prototype.o,U.createFromModelPath=function(t,e){return T(U,t,{baseOptions:{modelAssetPath:e}})},U.createFromModelBuffer=function(t,e){return T(U,t,{baseOptions:{modelAssetBuffer:e}})},U.createFromOptions=function(t,e){return T(U,t,e)},U.HAND_CONNECTIONS=Nr,U.POSE_CONNECTIONS=rc,U.FACE_LANDMARKS_LIPS=Ir,U.FACE_LANDMARKS_LEFT_EYE=Cr,U.FACE_LANDMARKS_LEFT_EYEBROW=Sr,U.FACE_LANDMARKS_LEFT_IRIS=ec,U.FACE_LANDMARKS_RIGHT_EYE=Lr,U.FACE_LANDMARKS_RIGHT_EYEBROW=Fr,U.FACE_LANDMARKS_RIGHT_IRIS=sc,U.FACE_LANDMARKS_FACE_OVAL=Rr,U.FACE_LANDMARKS_CONTOURS=nc,U.FACE_LANDMARKS_TESSELATION=ic;var It=class extends pt{constructor(t,e){super(new Ot(t,e),"input_image","norm_rect",!0),this.j={classifications:[]},_(t=this.h=new Bh,0,1,e=new G)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return _(this.h,0,2,Ei(t,P(this.h,gr,2))),this.l(t)}sa(t,e){return this.j={classifications:[]},Ut(this,t,e),this.j}ta(t,e,s){return this.j={classifications:[]},Jt(this,t,s,e),this.j}m(){var t=new gt;D(t,"input_image"),D(t,"norm_rect"),I(t,"classifications");const e=new Et;Gt(e,L2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),N(s,"IMAGE:input_image"),N(s,"NORM_RECT:norm_rect"),x(s,"CLASSIFICATIONS:classifications"),s.o(e),xt(t,s),this.g.attachProtoListener("classifications",(n,i)=>{this.j=function(r){const a={classifications:he(r,v2,1).map(o=>{var h;return Ar(((h=P(o,vh,4))==null?void 0:h.g())??[],Ft(o,2)??0,Nt(o,3)??"")})};return Qs(Ze(r,2))!=null&&(a.timestampMs=Qs(Ze(r,2))??0),a}(_2(n)),f(this,i)}),this.g.attachEmptyPacketListener("classifications",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};It.prototype.classifyForVideo=It.prototype.ta,It.prototype.classify=It.prototype.sa,It.prototype.setOptions=It.prototype.o,It.createFromModelPath=function(t,e){return T(It,t,{baseOptions:{modelAssetPath:e}})},It.createFromModelBuffer=function(t,e){return T(It,t,{baseOptions:{modelAssetBuffer:e}})},It.createFromOptions=function(t,e){return T(It,t,e)};var wt=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!0),this.h=new Gh,this.embeddings={embeddings:[]},_(t=this.h,0,1,e=new G)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){var e=this.h,s=P(this.h,La,2);return s=s?s.clone():new La,t.l2Normalize!==void 0?ks(s,1,t.l2Normalize):"l2Normalize"in t&&R(s,1),t.quantize!==void 0?ks(s,2,t.quantize):"quantize"in t&&R(s,2),_(e,0,2,s),this.l(t)}za(t,e){return Ut(this,t,e),this.embeddings}Aa(t,e,s){return Jt(this,t,s,e),this.embeddings}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"embeddings_out");const e=new Et;Gt(e,F2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"EMBEDDINGS:embeddings_out"),s.o(e),xt(t,s),this.g.attachProtoListener("embeddings_out",(n,i)=>{n=E2(n),this.embeddings=function(r){return{embeddings:he(r,b2,1).map(a=>{var h,c;const o={headIndex:Ft(a,3)??0??-1,headName:Nt(a,4)??""??""};if(Oo(a,Sa,ti(a,1))!==void 0)a=Ie(a=P(a,Sa,ti(a,1)),1,Ee,ke()),o.floatEmbedding=a.slice();else{const l=new Uint8Array(0);o.quantizedEmbedding=((c=(h=P(a,w2,ti(a,2)))==null?void 0:h.oa())==null?void 0:c.h())??l}return o}),timestampMs:Qs(Ze(r,2))??0}}(n),f(this,i)}),this.g.attachEmptyPacketListener("embeddings_out",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};wt.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=Oa(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=Oa(Da(t.quantizedEmbedding),Da(e.quantizedEmbedding))}return t},wt.prototype.embedForVideo=wt.prototype.Aa,wt.prototype.embed=wt.prototype.za,wt.prototype.setOptions=wt.prototype.o,wt.createFromModelPath=function(t,e){return T(wt,t,{baseOptions:{modelAssetPath:e}})},wt.createFromModelBuffer=function(t,e){return T(wt,t,{baseOptions:{modelAssetBuffer:e}})},wt.createFromOptions=function(t,e){return T(wt,t,e)};var xi=class{constructor(t,e,s){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=s}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(s=>{s.close()}),(e=this.categoryMask)==null||e.close()}};function eo(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function so(t){try{const e=new xi(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{Cn(t)}}xi.prototype.close=xi.prototype.close;var ut=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Er,this.v=new Vh,_(this.h,0,3,this.v),_(t=this.h,0,1,e=new G)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?R(this.h,2,as(t.displayNamesLocale)):"displayNamesLocale"in t&&R(this.h,2),"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}I(){(function(t){var s,n;const e=he(t.da(),rt,1).filter(i=>(Nt(i,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(t.s=[],e.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");e.length===1&&(((n=(s=P(e[0],Et,7))==null?void 0:s.l())==null?void 0:n.g())??new Map).forEach((i,r)=>{t.s[Number(r)]=Nt(i,1)??""})})(this)}segment(t,e,s){const n=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:s,eo(this),Ut(this,t,n),so(this)}Ma(t,e,s,n){const i=typeof s!="function"?s:{};return this.j=typeof s=="function"?s:n,eo(this),Jt(this,t,i,e),so(this)}Da(){return this.s}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect");const e=new Et;Gt(e,zh,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),s.o(e),xt(t,s),In(this,t),this.outputConfidenceMasks&&(I(t,"confidence_masks"),x(s,"CONFIDENCE_MASKS:confidence_masks"),ts(this,"confidence_masks"),this.g.ca("confidence_masks",(n,i)=>{this.confidenceMasks=n.map(r=>ns(this,r,!0,!this.j)),f(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],f(this,n)})),this.outputCategoryMask&&(I(t,"category_mask"),x(s,"CATEGORY_MASK:category_mask"),ts(this,"category_mask"),this.g.U("category_mask",(n,i)=>{this.categoryMask=ns(this,n,!1,!this.j),f(this,i)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,f(this,n)})),I(t,"quality_scores"),x(s,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,i)=>{this.qualityScores=n,f(this,i)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ut.prototype.getLabels=ut.prototype.Da,ut.prototype.segmentForVideo=ut.prototype.Ma,ut.prototype.segment=ut.prototype.segment,ut.prototype.setOptions=ut.prototype.o,ut.createFromModelPath=function(t,e){return T(ut,t,{baseOptions:{modelAssetPath:e}})},ut.createFromModelBuffer=function(t,e){return T(ut,t,{baseOptions:{modelAssetBuffer:e}})},ut.createFromOptions=function(t,e){return T(ut,t,e)};var Pi=class{constructor(t,e,s){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=s}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(s=>{s.close()}),(e=this.categoryMask)==null||e.close()}};Pi.prototype.close=Pi.prototype.close;var V2=class extends p{constructor(t){super(t)}},Ve=[0,j,-2],rn=[0,se,-3,B,se,-1],no=[0,rn],io=[0,rn,j,-1],ai=class extends p{constructor(t){super(t)}},ro=[0,se,-1,B],H2=class extends p{constructor(t){super(t)}},ao=class extends p{constructor(t){super(t)}},Mi=[1,2,3,4,5,6,7,8,9,10,14,15],ac=class extends p{constructor(t){super(t)}};ac.prototype.g=xn([0,Z,[0,Mi,L,rn,L,[0,rn,Ve],L,no,L,[0,no,Ve],L,ro,L,[0,se,-3,B,Dt],L,[0,se,-3,B],L,[0,S,se,-2,B,j,B,-1,2,se,Ve],L,io,L,[0,io,Ve],se,Ve,S,L,[0,se,-3,B,Ve,-1],L,[0,Z,ro]],S,[0,S,j,-1,B]]);var Yt=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Er,this.s=new Vh,_(this.h,0,3,this.s),_(t=this.h,0,1,e=new G)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}segment(t,e,s,n){const i=typeof s!="function"?s:{};this.j=typeof s=="function"?s:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,s=this.B+1,n=new ac;const r=new ao;var a=new V2;if(qt(a,1,255),_(r,0,12,a),e.keypoint&&e.scribble)throw Error("Cannot provide both keypoint and scribble.");if(e.keypoint){var o=new ai;ks(o,3,!0),g(o,1,e.keypoint.x),g(o,2,e.keypoint.y),As(r,5,Mi,o)}else{if(!e.scribble)throw Error("Must provide either a keypoint or a scribble.");for(o of(a=new H2,e.scribble))ks(e=new ai,3,!0),g(e,1,o.x),g(e,2,o.y),tn(a,1,ai,e);As(r,15,Mi,a)}tn(n,1,ao,r),this.g.addProtoToStream(n.g(),"drishti.RenderData","roi_in",s),Ut(this,t,i);t:{try{const c=new Pi(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var h=c;break t}this.j(c)}finally{Cn(this)}h=void 0}return h}m(){var t=new gt;D(t,"image_in"),D(t,"roi_in"),D(t,"norm_rect_in");const e=new Et;Gt(e,zh,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),N(s,"IMAGE:image_in"),N(s,"ROI:roi_in"),N(s,"NORM_RECT:norm_rect_in"),s.o(e),xt(t,s),In(this,t),this.outputConfidenceMasks&&(I(t,"confidence_masks"),x(s,"CONFIDENCE_MASKS:confidence_masks"),ts(this,"confidence_masks"),this.g.ca("confidence_masks",(n,i)=>{this.confidenceMasks=n.map(r=>ns(this,r,!0,!this.j)),f(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],f(this,n)})),this.outputCategoryMask&&(I(t,"category_mask"),x(s,"CATEGORY_MASK:category_mask"),ts(this,"category_mask"),this.g.U("category_mask",(n,i)=>{this.categoryMask=ns(this,n,!1,!this.j),f(this,i)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,f(this,n)})),I(t,"quality_scores"),x(s,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,i)=>{this.qualityScores=n,f(this,i)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Yt.prototype.segment=Yt.prototype.segment,Yt.prototype.setOptions=Yt.prototype.o,Yt.createFromModelPath=function(t,e){return T(Yt,t,{baseOptions:{modelAssetPath:e}})},Yt.createFromModelBuffer=function(t,e){return T(Yt,t,{baseOptions:{modelAssetBuffer:e}})},Yt.createFromOptions=function(t,e){return T(Yt,t,e)};var Ct=class extends pt{constructor(t,e){super(new Ot(t,e),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},_(t=this.h=new jh,0,1,e=new G)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?R(this.h,2,as(t.displayNamesLocale)):"displayNamesLocale"in t&&R(this.h,2),t.maxResults!==void 0?qt(this.h,3,t.maxResults):"maxResults"in t&&R(this.h,3),t.scoreThreshold!==void 0?g(this.h,4,t.scoreThreshold):"scoreThreshold"in t&&R(this.h,4),t.categoryAllowlist!==void 0?en(this.h,5,t.categoryAllowlist):"categoryAllowlist"in t&&R(this.h,5),t.categoryDenylist!==void 0?en(this.h,6,t.categoryDenylist):"categoryDenylist"in t&&R(this.h,6),this.l(t)}D(t,e){return this.j={detections:[]},Ut(this,t,e),this.j}F(t,e,s){return this.j={detections:[]},Jt(this,t,s,e),this.j}m(){var t=new gt;D(t,"input_frame_gpu"),D(t,"norm_rect"),I(t,"detections");const e=new Et;Gt(e,N2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.ObjectDetectorGraph"),N(s,"IMAGE:input_frame_gpu"),N(s,"NORM_RECT:norm_rect"),x(s,"DETECTIONS:detections"),s.o(e),xt(t,s),this.g.attachProtoVectorListener("detections",(n,i)=>{for(const r of n)n=wh(r),this.j.detections.push(Kh(n));f(this,i)}),this.g.attachEmptyPacketListener("detections",n=>{f(this,n)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ct.prototype.detectForVideo=Ct.prototype.F,Ct.prototype.detect=Ct.prototype.D,Ct.prototype.setOptions=Ct.prototype.o,Ct.createFromModelPath=async function(t,e){return T(Ct,t,{baseOptions:{modelAssetPath:e}})},Ct.createFromModelBuffer=function(t,e){return T(Ct,t,{baseOptions:{modelAssetBuffer:e}})},Ct.createFromOptions=function(t,e){return T(Ct,t,e)};var ki=class{constructor(t,e,s){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=s}close(){var t;(t=this.segmentationMasks)==null||t.forEach(e=>{e.close()})}};function oo(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function ho(t){try{const e=new ki(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.s)return e;t.s(e)}finally{Cn(t)}}ki.prototype.close=ki.prototype.close;var bt=class extends pt{constructor(t,e){super(new Ot(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,_(t=this.h=new Wh,0,1,e=new G),this.v=new Oh,_(this.h,0,3,this.v),this.j=new Dh,_(this.h,0,2,this.j),qt(this.j,4,1),g(this.j,2,.5),g(this.v,2,.5),g(this.h,4,.5)}get baseOptions(){return P(this.h,G,1)}set baseOptions(t){_(this.h,0,1,t)}o(t){return"numPoses"in t&&qt(this.j,4,t.numPoses??1),"minPoseDetectionConfidence"in t&&g(this.j,2,t.minPoseDetectionConfidence??.5),"minTrackingConfidence"in t&&g(this.h,4,t.minTrackingConfidence??.5),"minPosePresenceConfidence"in t&&g(this.v,2,t.minPosePresenceConfidence??.5),"outputSegmentationMasks"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}D(t,e,s){const n=typeof e!="function"?e:{};return this.s=typeof e=="function"?e:s,oo(this),Ut(this,t,n),ho(this)}F(t,e,s,n){const i=typeof s!="function"?s:{};return this.s=typeof s=="function"?s:n,oo(this),Jt(this,t,i,e),ho(this)}m(){var t=new gt;D(t,"image_in"),D(t,"norm_rect"),I(t,"normalized_landmarks"),I(t,"world_landmarks"),I(t,"segmentation_masks");const e=new Et;Gt(e,D2,this.h);const s=new rt;Tt(s,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),N(s,"IMAGE:image_in"),N(s,"NORM_RECT:norm_rect"),x(s,"NORM_LANDMARKS:normalized_landmarks"),x(s,"WORLD_LANDMARKS:world_landmarks"),s.o(e),xt(t,s),In(this,t),this.g.attachProtoVectorListener("normalized_landmarks",(n,i)=>{this.landmarks=[];for(const r of n)n=Rs(r),this.landmarks.push(kn(n));f(this,i)}),this.g.attachEmptyPacketListener("normalized_landmarks",n=>{this.landmarks=[],f(this,n)}),this.g.attachProtoVectorListener("world_landmarks",(n,i)=>{this.worldLandmarks=[];for(const r of n)n=Xe(r),this.worldLandmarks.push(xs(n));f(this,i)}),this.g.attachEmptyPacketListener("world_landmarks",n=>{this.worldLandmarks=[],f(this,n)}),this.outputSegmentationMasks&&(x(s,"SEGMENTATION_MASK:segmentation_masks"),ts(this,"segmentation_masks"),this.g.ca("segmentation_masks",(n,i)=>{this.segmentationMasks=n.map(r=>ns(this,r,!0,!this.s)),f(this,i)}),this.g.attachEmptyPacketListener("segmentation_masks",n=>{this.segmentationMasks=[],f(this,n)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};bt.prototype.detectForVideo=bt.prototype.F,bt.prototype.detect=bt.prototype.D,bt.prototype.setOptions=bt.prototype.o,bt.createFromModelPath=function(t,e){return T(bt,t,{baseOptions:{modelAssetPath:e}})},bt.createFromModelBuffer=function(t,e){return T(bt,t,{baseOptions:{modelAssetBuffer:e}})},bt.createFromOptions=function(t,e){return T(bt,t,e)},bt.POSE_CONNECTIONS=rc;class z2{constructor(e={}){m(this,"handLandmarker",null);m(this,"isInitialized",!1);m(this,"isRunning",!1);m(this,"animationFrameId",null);m(this,"lastTimestamp",0);m(this,"config");m(this,"callback",null);m(this,"videoElement",null);m(this,"detectLoop",()=>{if(!this.isRunning||!this.handLandmarker||!this.videoElement||!this.callback)return;const e=performance.now();if(this.videoElement.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&e!==this.lastTimestamp){try{const s=this.handLandmarker.detectForVideo(this.videoElement,e),n=this.transformResult(s,e);this.callback(n)}catch(s){console.error("Error during hand detection:",s)}this.lastTimestamp=e}this.animationFrameId=requestAnimationFrame(this.detectLoop)});this.config={maxHands:e.maxHands??2,minDetectionConfidence:e.minDetectionConfidence??.5,minTrackingConfidence:e.minTrackingConfidence??.5,modelAssetPath:e.modelAssetPath}}async initialize(){if(this.isInitialized){console.warn("HandTracker already initialized");return}try{const e=await Me.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm");this.handLandmarker=await ft.createFromOptions(e,{baseOptions:{modelAssetPath:this.config.modelAssetPath??"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:this.config.maxHands,minHandDetectionConfidence:this.config.minDetectionConfidence,minTrackingConfidence:this.config.minTrackingConfidence}),this.isInitialized=!0,console.log("HandTracker initialized successfully")}catch(e){throw console.error("Failed to initialize HandTracker:",e),e}}start(e,s){if(!this.isInitialized||!this.handLandmarker)throw new Error("HandTracker not initialized. Call initialize() first.");if(this.isRunning){console.warn("HandTracker already running");return}this.videoElement=e,this.callback=s,this.isRunning=!0,this.lastTimestamp=performance.now(),this.detectLoop()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.callback=null,this.videoElement=null}transformResult(e,s){var i,r,a,o,h;const n=[];if(e.landmarks&&e.landmarks.length>0)for(let c=0;c<e.landmarks.length;c++){const l=e.landmarks[c],u=((i=e.worldLandmarks)==null?void 0:i[c])??l,w=(a=(r=e.handednesses)==null?void 0:r[c])==null?void 0:a[0];n.push({landmarks:l,worldLandmarks:u,handedness:(w==null?void 0:w.categoryName)??"Right",confidence:(w==null?void 0:w.score)??1})}return{hands:n,timestamp:s,frameWidth:((o=this.videoElement)==null?void 0:o.videoWidth)??0,frameHeight:((h=this.videoElement)==null?void 0:h.videoHeight)??0}}async detectImage(e){if(!this.isInitialized||!this.handLandmarker)throw new Error("HandTracker not initialized. Call initialize() first.");await this.handLandmarker.setOptions({runningMode:"IMAGE"});const s=this.handLandmarker.detect(e),n=this.transformResult(s,performance.now());return await this.handLandmarker.setOptions({runningMode:"VIDEO"}),n}async updateConfig(e){this.config={...this.config,...e},this.isInitialized&&this.handLandmarker&&await this.handLandmarker.setOptions({numHands:this.config.maxHands,minHandDetectionConfidence:this.config.minDetectionConfidence,minTrackingConfidence:this.config.minTrackingConfidence})}destroy(){this.stop(),this.handLandmarker&&(this.handLandmarker.close(),this.handLandmarker=null),this.isInitialized=!1}get initialized(){return this.isInitialized}get running(){return this.isRunning}}var d=(t=>(t[t.WRIST=0]="WRIST",t[t.THUMB_CMC=1]="THUMB_CMC",t[t.THUMB_MCP=2]="THUMB_MCP",t[t.THUMB_IP=3]="THUMB_IP",t[t.THUMB_TIP=4]="THUMB_TIP",t[t.INDEX_MCP=5]="INDEX_MCP",t[t.INDEX_PIP=6]="INDEX_PIP",t[t.INDEX_DIP=7]="INDEX_DIP",t[t.INDEX_TIP=8]="INDEX_TIP",t[t.MIDDLE_MCP=9]="MIDDLE_MCP",t[t.MIDDLE_PIP=10]="MIDDLE_PIP",t[t.MIDDLE_DIP=11]="MIDDLE_DIP",t[t.MIDDLE_TIP=12]="MIDDLE_TIP",t[t.RING_MCP=13]="RING_MCP",t[t.RING_PIP=14]="RING_PIP",t[t.RING_DIP=15]="RING_DIP",t[t.RING_TIP=16]="RING_TIP",t[t.PINKY_MCP=17]="PINKY_MCP",t[t.PINKY_PIP=18]="PINKY_PIP",t[t.PINKY_DIP=19]="PINKY_DIP",t[t.PINKY_TIP=20]="PINKY_TIP",t))(d||{});const an=[4,8,12,16,20],j2=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]],oc=(t,e)=>{const s=t.x-e.x,n=t.y-e.y;return Math.sqrt(s*s+n*n)},hc=(t,e=d.INDEX_TIP)=>{const s=t[d.THUMB_TIP],n=t[e];return oc(s,n)},cc=t=>{const e=[t[d.WRIST],t[d.INDEX_MCP],t[d.MIDDLE_MCP],t[d.RING_MCP],t[d.PINKY_MCP]],s={x:e.reduce((r,a)=>r+a.x,0)/e.length,y:e.reduce((r,a)=>r+a.y,0)/e.length,z:e.reduce((r,a)=>r+a.z,0)/e.length},n=an.map(r=>t[r]);return n.reduce((r,a)=>r+oc(a,s),0)/n.length},W2=(t,e)=>{const n={thumb:[d.THUMB_CMC,d.THUMB_MCP,d.THUMB_IP,d.THUMB_TIP],index:[d.INDEX_MCP,d.INDEX_PIP,d.INDEX_DIP,d.INDEX_TIP],middle:[d.MIDDLE_MCP,d.MIDDLE_PIP,d.MIDDLE_DIP,d.MIDDLE_TIP],ring:[d.RING_MCP,d.RING_PIP,d.RING_DIP,d.RING_TIP],pinky:[d.PINKY_MCP,d.PINKY_PIP,d.PINKY_DIP,d.PINKY_TIP]}[e],[i,r,a,o]=n.map(C=>t[C]),h={x:r.x-i.x,y:r.y-i.y},c={x:o.x-r.x,y:o.y-r.y},l=h.x*c.x+h.y*c.y,u=Math.sqrt(h.x*h.x+h.y*h.y),w=Math.sqrt(c.x*c.x+c.y*c.y);if(u===0||w===0)return 0;const O=Math.max(-1,Math.min(1,l/(u*w)));return 1-Math.acos(O)/Math.PI},K2=t=>{const e=t[d.WRIST],s=t[d.MIDDLE_MCP],n=s.x-e.x,i=s.y-e.y;return Math.atan2(i,n)},X2=t=>{const e=t[d.WRIST],s=t[d.MIDDLE_MCP],n=t[d.INDEX_MCP],i={x:s.x-e.x,y:s.y-e.y,z:s.z-e.z},r={x:n.x-e.x,y:n.y-e.y,z:n.z-e.z},a=i.x*r.y-i.y*r.x;return(Math.sign(a)+1)/2},Y2=t=>{const e=[t[d.INDEX_TIP],t[d.MIDDLE_TIP],t[d.RING_TIP],t[d.PINKY_TIP]],s=[t[d.INDEX_MCP],t[d.MIDDLE_MCP],t[d.RING_MCP],t[d.PINKY_MCP]];let n=0;for(let i=0;i<e.length-1;i++){const r={x:e[i].x-s[i].x,y:e[i].y-s[i].y},a={x:e[i+1].x-s[i+1].x,y:e[i+1].y-s[i+1].y},o=r.x*a.x+r.y*a.y,h=Math.sqrt(r.x*r.x+r.y*r.y),c=Math.sqrt(a.x*a.x+a.y*a.y);if(h>0&&c>0){const l=Math.max(-1,Math.min(1,o/(h*c)));n+=Math.acos(l)}}return n/(e.length-1)},ee=(t,e,s,n=!0)=>({x:n?e-t.x*e:t.x*e,y:t.y*s}),$2={primaryColor:"#00ffff",secondaryColor:"#ff00ff",accentColor:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.1)",glowIntensity:.8,glowRadius:15,landmarkRadius:6,lineWidth:2,trailLength:30,pulseSpeed:.005,trailFade:.92};class q2{constructor(e,s={},n=!0){m(this,"canvas");m(this,"ctx");m(this,"theme");m(this,"state");m(this,"mirror");this.canvas=e;const i=e.getContext("2d");if(!i)throw new Error("Failed to get 2D context from canvas");this.ctx=i,this.theme={...$2,...s},this.mirror=n,this.state={trails:new Map,pulsePhase:0,lastRenderTime:performance.now()}}updateTheme(e){this.theme={...this.theme,...e}}clear(e=!0){e?(this.ctx.fillStyle=this.theme.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)):this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}render(e){const s=performance.now(),n=s-this.state.lastRenderTime;this.state.lastRenderTime=s,this.state.pulsePhase+=this.theme.pulseSpeed*n,this.state.pulsePhase>Math.PI*2&&(this.state.pulsePhase-=Math.PI*2),this.clear(!0),e.hands.forEach((i,r)=>{this.renderHand(i,r,s)}),this.updateTrails(s),this.renderTrails(),this.renderReactiveEffects(e)}renderHand(e,s,n){const{landmarks:i,handedness:r}=e,o=r==="Left"?this.theme.primaryColor:this.theme.secondaryColor;this.renderSkeleton(i,o),this.renderPalmArea(i,o),this.renderLandmarks(i,o),this.updateHandTrails(i,s,n)}renderSkeleton(e,s){this.ctx.strokeStyle=s,this.ctx.lineWidth=this.theme.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.shadowColor=s,this.ctx.shadowBlur=this.theme.glowRadius*.5;for(const[n,i]of j2){const r=ee(e[n],this.canvas.width,this.canvas.height,this.mirror),a=ee(e[i],this.canvas.width,this.canvas.height,this.mirror);this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke()}this.ctx.shadowBlur=0}renderPalmArea(e,s){const n=[e[d.WRIST],e[d.THUMB_CMC],e[d.INDEX_MCP],e[d.MIDDLE_MCP],e[d.RING_MCP],e[d.PINKY_MCP]].map(o=>ee(o,this.canvas.width,this.canvas.height,this.mirror)),i=n.reduce((o,h)=>o+h.x,0)/n.length,r=n.reduce((o,h)=>o+h.y,0)/n.length,a=this.ctx.createRadialGradient(i,r,0,i,r,100);a.addColorStop(0,this.hexToRgba(s,.3)),a.addColorStop(1,this.hexToRgba(s,0)),this.ctx.fillStyle=a,this.ctx.beginPath(),this.ctx.moveTo(n[0].x,n[0].y);for(let o=1;o<n.length;o++)this.ctx.lineTo(n[o].x,n[o].y);this.ctx.closePath(),this.ctx.fill()}renderLandmarks(e,s){const n=1+Math.sin(this.state.pulsePhase)*.2;for(let i=0;i<e.length;i++){const r=ee(e[i],this.canvas.width,this.canvas.height,this.mirror),a=an.includes(i),o=this.theme.landmarkRadius*(a?1.5*n:1);this.ctx.shadowColor=s,this.ctx.shadowBlur=this.theme.glowRadius*this.theme.glowIntensity,this.ctx.beginPath(),this.ctx.arc(r.x,r.y,o+2,0,Math.PI*2),this.ctx.strokeStyle=this.hexToRgba(s,.5),this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(r.x,r.y,o,0,Math.PI*2),this.ctx.fillStyle=a?s:this.hexToRgba(s,.8),this.ctx.fill(),this.ctx.shadowBlur=0}}updateHandTrails(e,s,n){an.forEach((i,r)=>{const a=`${s}-${r}`,o=ee(e[i],this.canvas.width,this.canvas.height,this.mirror);this.state.trails.has(a)||this.state.trails.set(a,[]);const h=this.state.trails.get(a);for(h.push({x:o.x,y:o.y,timestamp:n,alpha:1});h.length>this.theme.trailLength;)h.shift()})}updateTrails(e){for(const[s,n]of this.state.trails)for(let i=n.length-1;i>=0;i--)n[i].alpha*=this.theme.trailFade,n[i].alpha<.01&&n.splice(i,1)}renderTrails(){for(const[e,s]of this.state.trails){if(s.length<2)continue;const i=parseInt(e.split("-")[0])===0?this.theme.primaryColor:this.theme.secondaryColor;this.ctx.lineCap="round",this.ctx.lineJoin="round";for(let r=1;r<s.length;r++){const a=s[r-1],o=s[r];this.ctx.beginPath(),this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(o.x,o.y);const h=r/s.length;this.ctx.lineWidth=this.theme.lineWidth*h*3+1,this.ctx.strokeStyle=this.hexToRgba(i,o.alpha*.7),this.ctx.stroke()}}}renderReactiveEffects(e){e.hands.forEach((s,n)=>{const i=cc(s.landmarks);hc(s.landmarks)<.08&&this.renderPinchEffect(s,n),this.renderOpennessRing(s,i,n)})}renderPinchEffect(e,s){const n=ee(e.landmarks[d.THUMB_TIP],this.canvas.width,this.canvas.height,this.mirror),i=ee(e.landmarks[d.INDEX_TIP],this.canvas.width,this.canvas.height,this.mirror),r=(n.x+i.x)/2,a=(n.y+i.y)/2,o=20+Math.sin(this.state.pulsePhase*3)*10;this.ctx.shadowColor=this.theme.accentColor,this.ctx.shadowBlur=this.theme.glowRadius*2,this.ctx.beginPath(),this.ctx.arc(r,a,o,0,Math.PI*2),this.ctx.strokeStyle=this.theme.accentColor,this.ctx.lineWidth=3,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(r,a,5,0,Math.PI*2),this.ctx.fillStyle=this.theme.accentColor,this.ctx.fill(),this.ctx.shadowBlur=0}renderOpennessRing(e,s,n){const i=ee(e.landmarks[d.WRIST],this.canvas.width,this.canvas.height,this.mirror),r=30+s*150,a=n===0?this.theme.primaryColor:this.theme.secondaryColor,o=Math.PI*2*Math.min(s*3,1),h=-Math.PI/2-o/2;this.ctx.beginPath(),this.ctx.arc(i.x,i.y,r,h,h+o),this.ctx.strokeStyle=this.hexToRgba(a,.4),this.ctx.lineWidth=4,this.ctx.stroke()}hexToRgba(e,s){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!n)return`rgba(255, 255, 255, ${s})`;const i=parseInt(n[1],16),r=parseInt(n[2],16),a=parseInt(n[3],16);return`rgba(${i}, ${r}, ${a}, ${s})`}resize(e,s){this.canvas.width=e,this.canvas.height=s}reset(){this.state={trails:new Map,pulsePhase:0,lastRenderTime:performance.now()},this.clear(!1)}}class J2{constructor(e=200){m(this,"particles",[]);m(this,"maxParticles");this.maxParticles=e}emit(e,s,n,i={}){const{color:r="#00ffff",minSize:a=2,maxSize:o=5,minLife:h=20,maxLife:c=60,spread:l=Math.PI*2,speed:u=2}=i;for(let w=0;w<n;w++){this.particles.length>=this.maxParticles&&this.particles.shift();const O=Math.random()*l-l/2,b=Math.random()*u+.5,C=Math.random()*(c-h)+h;this.particles.push({x:e,y:s,vx:Math.cos(O)*b,vy:Math.sin(O)*b,life:C,maxLife:C,size:Math.random()*(o-a)+a,color:r,alpha:1})}}emitAtLandmark(e,s,n,i,r,a){const o=ee(e,s,n,i);this.emit(o.x,o.y,r,a)}update(e=1){for(let s=this.particles.length-1;s>=0;s--){const n=this.particles[s];n.x+=n.vx*e,n.y+=n.vy*e,n.vy+=.05*e,n.vx*=.99,n.vy*=.99,n.life-=e,n.alpha=Math.max(0,n.life/n.maxLife),n.life<=0&&this.particles.splice(s,1)}}render(e){for(const s of this.particles)e.beginPath(),e.arc(s.x,s.y,s.size*s.alpha,0,Math.PI*2),e.fillStyle=this.colorWithAlpha(s.color,s.alpha),e.fill()}clear(){this.particles=[]}get count(){return this.particles.length}colorWithAlpha(e,s){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!n)return`rgba(255, 255, 255, ${s})`;const i=parseInt(n[1],16),r=parseInt(n[2],16),a=parseInt(n[3],16);return`rgba(${i}, ${r}, ${a}, ${s})`}}class Z2{constructor(e={}){m(this,"audioContext",null);m(this,"masterGain",null);m(this,"oscillators",[]);m(this,"filter",null);m(this,"delay",null);m(this,"delayFeedback",null);m(this,"delayMix",null);m(this,"dryGain",null);m(this,"panner",null);m(this,"lfo",null);m(this,"lfoGain",null);m(this,"isInitialized",!1);m(this,"isPlaying",!1);m(this,"config");m(this,"params",new Map);this.config={bpm:e.bpm??120,masterVolume:e.masterVolume??.8,autoPlay:e.autoPlay??!1},this.params.set("filter.cutoff",.5),this.params.set("filter.resonance",.3),this.params.set("delay.mix",.3),this.params.set("delay.time",.3),this.params.set("delay.feedback",.4),this.params.set("synth.detune",0),this.params.set("synth.pan",.5),this.params.set("master.gain",this.config.masterVolume)}async initialize(){if(this.isInitialized){console.warn("AudioController already initialized");return}try{this.audioContext=new AudioContext,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=this.config.masterVolume,this.masterGain.connect(this.audioContext.destination),this.panner=this.audioContext.createStereoPanner(),this.panner.pan.value=0,this.panner.connect(this.masterGain),this.filter=this.audioContext.createBiquadFilter(),this.filter.type="lowpass",this.filter.frequency.value=2e3,this.filter.Q.value=5,this.filter.connect(this.panner),this.delay=this.audioContext.createDelay(2),this.delay.delayTime.value=.3,this.delayFeedback=this.audioContext.createGain(),this.delayFeedback.gain.value=.4,this.delayMix=this.audioContext.createGain(),this.delayMix.gain.value=.3,this.dryGain=this.audioContext.createGain(),this.dryGain.gain.value=.7,this.filter.connect(this.dryGain),this.dryGain.connect(this.panner),this.filter.connect(this.delay),this.delay.connect(this.delayMix),this.delayMix.connect(this.panner),this.delay.connect(this.delayFeedback),this.delayFeedback.connect(this.delay),this.lfo=this.audioContext.createOscillator(),this.lfo.type="sine",this.lfo.frequency.value=.5,this.lfoGain=this.audioContext.createGain(),this.lfoGain.gain.value=200,this.lfo.connect(this.lfoGain),this.lfoGain.connect(this.filter.frequency),this.lfo.start(),this.isInitialized=!0,console.log("AudioController initialized successfully"),this.config.autoPlay&&await this.play()}catch(e){throw console.error("Failed to initialize AudioController:",e),e}}createOscillators(){if(!this.audioContext||!this.filter)return;const e=[130.81,155.56,196];for(const s of e){const n=this.audioContext.createOscillator();n.type="sawtooth",n.frequency.value=s,n.detune.value=this.params.get("synth.detune")??0;const i=this.audioContext.createOscillator();i.type="sawtooth",i.frequency.value=s,i.detune.value=(this.params.get("synth.detune")??0)+7;const r=this.audioContext.createGain();r.gain.value=.15,n.connect(r),i.connect(r),r.connect(this.filter),n.start(),i.start(),this.oscillators.push(n,i)}}setParameter(e,s,n){const i=`${e}.${s}`,r=Math.max(0,Math.min(1,n));if(this.params.set(i,r),!!this.audioContext)switch(i){case"filter.cutoff":if(this.filter){const o=100*Math.pow(100,r);this.filter.frequency.setTargetAtTime(o,this.audioContext.currentTime,.01)}break;case"filter.resonance":if(this.filter){const o=r*20;this.filter.Q.setTargetAtTime(o,this.audioContext.currentTime,.01)}break;case"delay.mix":this.delayMix&&this.dryGain&&(this.delayMix.gain.setTargetAtTime(r,this.audioContext.currentTime,.01),this.dryGain.gain.setTargetAtTime(1-r*.5,this.audioContext.currentTime,.01));break;case"delay.time":if(this.delay){const o=.05+r*.95;this.delay.delayTime.setTargetAtTime(o,this.audioContext.currentTime,.01)}break;case"delay.feedback":if(this.delayFeedback){const o=r*.85;this.delayFeedback.gain.setTargetAtTime(o,this.audioContext.currentTime,.01)}break;case"synth.detune":const a=(r-.5)*200;for(let o=0;o<this.oscillators.length;o+=2)this.oscillators[o]&&this.oscillators[o].detune.setTargetAtTime(a,this.audioContext.currentTime,.01),this.oscillators[o+1]&&this.oscillators[o+1].detune.setTargetAtTime(a+7,this.audioContext.currentTime,.01);break;case"synth.pan":if(this.panner){const o=(r-.5)*2;this.panner.pan.setTargetAtTime(o,this.audioContext.currentTime,.01)}break;case"master.gain":this.masterGain&&this.masterGain.gain.setTargetAtTime(r,this.audioContext.currentTime,.01);break}}getParameter(e,s){return this.params.get(`${e}.${s}`)}async play(){if(!(!this.audioContext||this.isPlaying))try{this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.createOscillators(),this.isPlaying=!0,console.log("Audio playback started")}catch(e){console.error("Failed to start playback:",e)}}async stop(){if(this.isPlaying)try{for(const e of this.oscillators)try{e.stop(),e.disconnect()}catch{}this.oscillators=[],this.isPlaying=!1,console.log("Audio playback stopped")}catch(e){console.error("Failed to stop playback:",e)}}async togglePlayback(){this.isPlaying?await this.stop():await this.play()}triggerNote(e=60,s=100,n=.5){if(!this.audioContext||!this.filter)return;const i=440*Math.pow(2,(e-69)/12),r=this.audioContext.createOscillator();r.type="sawtooth",r.frequency.value=i;const a=this.audioContext.createGain();a.gain.value=s/127*.3;const o=this.audioContext.currentTime;a.gain.setValueAtTime(0,o),a.gain.linearRampToValueAtTime(s/127*.3,o+.01),a.gain.linearRampToValueAtTime(s/127*.2,o+.1),a.gain.linearRampToValueAtTime(0,o+n),r.connect(a),a.connect(this.filter),r.start(o),r.stop(o+n+.1)}setMasterVolume(e){this.setParameter("master","gain",e)}getDevices(){return["synth","filter","delay","master"]}getDeviceParameters(e){return{synth:["detune","pan"],filter:["cutoff","resonance"],delay:["mix","time","feedback"],master:["gain"]}[e]??[]}get initialized(){return this.isInitialized}get playing(){return this.isPlaying}async destroy(){if(await this.stop(),this.lfo)try{this.lfo.stop(),this.lfo.disconnect()}catch{}this.audioContext&&await this.audioContext.close(),this.audioContext=null,this.masterGain=null,this.filter=null,this.delay=null,this.delayFeedback=null,this.delayMix=null,this.dryGain=null,this.panner=null,this.lfo=null,this.lfoGain=null,this.isInitialized=!1}}class Q2{constructor(e=.5){m(this,"value",null);m(this,"factor");this.factor=Math.max(0,Math.min(1,e))}filter(e){return this.value===null?this.value=e:this.value=this.value*this.factor+e*(1-this.factor),this.value}reset(){this.value=null}setFactor(e){this.factor=Math.max(0,Math.min(1,e))}get currentValue(){return this.value}}class tl{constructor(e=.3){m(this,"value",null);m(this,"alpha");this.alpha=Math.max(.01,Math.min(1,e))}filter(e){return this.value===null?this.value=e:this.value=this.alpha*e+(1-this.alpha)*this.value,this.value}reset(){this.value=null}setAlpha(e){this.alpha=Math.max(.01,Math.min(1,e))}}class el{constructor(e=1,s=.007,n=1){m(this,"minCutoff");m(this,"beta");m(this,"dCutoff");m(this,"xFilter");m(this,"dxFilter");m(this,"lastTime",null);m(this,"lastValue",null);this.minCutoff=e,this.beta=s,this.dCutoff=n,this.xFilter=new co(this.alpha(e,1/60)),this.dxFilter=new co(this.alpha(n,1/60))}alpha(e,s){return 1/(1+1/(2*Math.PI*e)/s)}filter(e,s){const n=s??Date.now()/1e3;if(this.lastTime===null||this.lastValue===null)return this.lastTime=n,this.lastValue=e,this.xFilter.setAlpha(this.alpha(this.minCutoff,1/60)),this.xFilter.filter(e);const i=Math.max(n-this.lastTime,1e-6);this.lastTime=n;const r=(e-this.lastValue)/i;this.lastValue=e,this.dxFilter.setAlpha(this.alpha(this.dCutoff,i));const a=this.dxFilter.filter(r),o=this.minCutoff+this.beta*Math.abs(a);return this.xFilter.setAlpha(this.alpha(o,i)),this.xFilter.filter(e)}reset(){this.lastTime=null,this.lastValue=null,this.xFilter.reset(),this.dxFilter.reset()}updateParams(e,s,n){e!==void 0&&(this.minCutoff=e),s!==void 0&&(this.beta=s),n!==void 0&&(this.dCutoff=n)}}class co{constructor(e){m(this,"y",null);m(this,"alpha");this.alpha=e}filter(e){return this.y===null?this.y=e:this.y=this.alpha*e+(1-this.alpha)*this.y,this.y}reset(){this.y=null}setAlpha(e){this.alpha=e}}class sl{constructor(e=5){m(this,"window");m(this,"size");m(this,"sum",0);this.size=Math.max(1,e),this.window=[]}filter(e){return this.window.push(e),this.sum+=e,this.window.length>this.size&&(this.sum-=this.window.shift()),this.sum/this.window.length}reset(){this.window=[],this.sum=0}setWindowSize(e){for(this.size=Math.max(1,e);this.window.length>this.size;)this.sum-=this.window.shift()}}const nl=t=>{switch(t.type){case"low-pass":return new Q2(t.factor??.5);case"exponential":return new tl(t.alpha??.3);case"one-euro":return new el(t.minCutoff??1,t.beta??.007,t.dCutoff??1);case"moving-average":return new sl(t.windowSize??5);case"none":default:return{filter:e=>e,reset:()=>{}}}};class il{constructor(){m(this,"mappings",new Map);m(this,"filters",new Map);m(this,"states",new Map);m(this,"previousLandmarks",new Map);m(this,"previousTimestamp",0);m(this,"onParameterChange",null)}setParameterCallback(e){this.onParameterChange=e}addMapping(e){this.mappings.set(e.id,e),this.filters.set(e.id,this.createFilterForMapping(e.smoothing)),this.states.set(e.id,{rawValue:0,smoothedValue:0,outputValue:0,lastUpdate:0})}removeMapping(e){this.mappings.delete(e),this.filters.delete(e),this.states.delete(e)}updateMapping(e,s){const n=this.mappings.get(e);if(!n)return;const i={...n,...s};this.mappings.set(e,i),s.smoothing&&this.filters.set(e,this.createFilterForMapping(i.smoothing))}setMappingEnabled(e,s){const n=this.mappings.get(e);n&&(n.enabled=s)}process(e){const s=e.timestamp-this.previousTimestamp;this.previousTimestamp=e.timestamp;for(const[n,i]of this.mappings){if(!i.enabled)continue;const r=this.findHand(e.hands,i.input.hand);if(!r)continue;const a=this.extractGestureValue(r.landmarks,i.input,r.handedness,s),o=this.filters.get(n),h=o?o.filter(a,e.timestamp/1e3):a,c=this.applyMapping(h,i),l={rawValue:a,smoothedValue:h,outputValue:c,lastUpdate:e.timestamp};this.states.set(n,l),this.onParameterChange&&this.onParameterChange(i.output.deviceId,i.output.parameterName,c);const u=r.handedness;this.previousLandmarks.set(u,[...r.landmarks])}return this.states}getState(e){return this.states.get(e)}getAllStates(){return new Map(this.states)}getMappings(){return Array.from(this.mappings.values())}reset(){for(const e of this.filters.values())e.reset();for(const[e,s]of this.states)this.states.set(e,{rawValue:0,smoothedValue:0,outputValue:0,lastUpdate:0});this.previousLandmarks.clear(),this.previousTimestamp=0}findHand(e,s){return s==="any"?e[0]:e.find(n=>n.handedness===s)}extractGestureValue(e,s,n,i){switch(s.type){case"pinch_distance":return hc(e,s.finger??d.INDEX_TIP);case"hand_openness":return cc(e);case"finger_curl":{const a={[d.THUMB_TIP]:"thumb",[d.INDEX_TIP]:"index",[d.MIDDLE_TIP]:"middle",[d.RING_TIP]:"ring",[d.PINKY_TIP]:"pinky"}[s.finger??d.INDEX_TIP]??"index";return W2(e,a)}case"hand_rotation":return K2(e);case"wrist_position_x":return e[d.WRIST].x;case"wrist_position_y":return e[d.WRIST].y;case"wrist_depth":return e[d.WRIST].z;case"finger_spread":return Y2(e);case"palm_facing":return X2(e);case"velocity_x":case"velocity_y":{const r=this.previousLandmarks.get(n);if(!r||i===0)return 0;const a=e[d.WRIST],o=r[d.WRIST],h=s.type==="velocity_x"?(a.x-o.x)/i:(a.y-o.y)/i;return Math.abs(h)}case"custom":return s.customExtractor?s.customExtractor(e):0;default:return 0}}applyMapping(e,s){const{input:n,output:i}=s,[r,a]=n.inputRange;let o=(e-r)/(a-r);o=Math.max(0,Math.min(1,o));const h=this.applyCurve(o,n.curve??"linear"),[c,l]=i.outputRange;let u=c+h*(l-c);return i.invert&&(u=l-(u-c)),u}applyCurve(e,s){switch(s){case"linear":return e;case"exponential":return e*e;case"logarithmic":return Math.log1p(e*(Math.E-1))/Math.log(Math.E);case"ease-in":return e*e*e;case"ease-out":return 1-Math.pow(1-e,3);case"ease-in-out":return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2;case"smooth-step":return e*e*(3-2*e);default:return e}}createFilterForMapping(e){return nl({type:e.type,factor:e.factor,minCutoff:e.minCutoff,beta:e.beta,dCutoff:e.dCutoff})}}const rl={type:"one-euro",minCutoff:1,beta:.007,dCutoff:1},Te=(t,e,s,n,i={})=>({id:t,name:e,enabled:!0,input:{hand:"any",inputRange:[0,1],curve:"linear",...s},output:n,smoothing:{...rl,...i}}),al=Te("pinch-filter-cutoff","Pinch â Filter Cutoff",{type:"pinch_distance",hand:"Right",finger:d.INDEX_TIP,inputRange:[.02,.15],curve:"smooth-step"},{deviceId:"filter",parameterName:"cutoff",outputRange:[.1,1]},{type:"one-euro",minCutoff:1.5,beta:.01}),ol=Te("wrist-y-volume","Hand Height â Volume",{type:"wrist_position_y",hand:"any",inputRange:[.2,.8],curve:"linear"},{deviceId:"master",parameterName:"gain",outputRange:[0,1],invert:!0},{type:"one-euro",minCutoff:.5,beta:.005}),hl=Te("depth-delay-mix","Hand Depth â Delay Mix",{type:"wrist_depth",hand:"Right",inputRange:[-.1,.1],curve:"smooth-step"},{deviceId:"delay",parameterName:"mix",outputRange:[0,.8]},{type:"one-euro",minCutoff:1,beta:.008});Te("rotation-pan","Hand Rotation â Pan",{type:"hand_rotation",hand:"Right",inputRange:[-Math.PI/3,Math.PI/3],curve:"linear"},{deviceId:"synth",parameterName:"pan",outputRange:[0,1]},{type:"one-euro",minCutoff:2,beta:.015});Te("openness-resonance","Hand Open â Resonance",{type:"hand_openness",hand:"Left",inputRange:[.1,.4],curve:"exponential"},{deviceId:"filter",parameterName:"resonance",outputRange:[0,.9]},{type:"one-euro",minCutoff:1,beta:.01});Te("curl-attack","Index Curl â Attack",{type:"finger_curl",hand:"Left",finger:d.INDEX_TIP,inputRange:[.2,.8],curve:"smooth-step"},{deviceId:"synth",parameterName:"attack",outputRange:[.01,.5]},{type:"one-euro",minCutoff:.8,beta:.005});Te("wrist-x-detune","Hand X â Detune",{type:"wrist_position_x",hand:"Right",inputRange:[.2,.8],curve:"linear"},{deviceId:"synth",parameterName:"detune",outputRange:[-50,50]},{type:"one-euro",minCutoff:2,beta:.02});Te("pinky-pinch-feedback","Thumb-Pinky â Delay Feedback",{type:"pinch_distance",hand:"Left",finger:d.PINKY_TIP,inputRange:[.03,.2],curve:"smooth-step"},{deviceId:"delay",parameterName:"feedback",outputRange:[.1,.85]},{type:"one-euro",minCutoff:1,beta:.008});const cl=()=>[al,ol,hl];class ll{constructor(e=1e3){m(this,"frames",0);m(this,"lastTime",performance.now());m(this,"fps",0);m(this,"updateInterval");this.updateInterval=e}tick(){this.frames++;const e=performance.now(),s=e-this.lastTime;return s>=this.updateInterval&&(this.fps=Math.round(this.frames*1e3/s),this.frames=0,this.lastTime=e),this.fps}get currentFPS(){return this.fps}reset(){this.frames=0,this.lastTime=performance.now(),this.fps=0}}var ul=le('<meta name="description" content="Control audio with hand gestures using computer vision"/>'),fl=le('<span class="status-indicator active svelte-1uha8ag"></span> <span class="status-text svelte-1uha8ag">Active</span>',1),dl=le('<span class="status-indicator svelte-1uha8ag"></span> <span class="status-text svelte-1uha8ag">Inactive</span>',1),pl=le('<p class="error svelte-1uha8ag"> </p>'),gl=le('<div class="start-screen svelte-1uha8ag"><div class="start-content svelte-1uha8ag"><div class="logo-container svelte-1uha8ag"><div class="logo-ring svelte-1uha8ag"></div> <div class="logo-icon svelte-1uha8ag">â</div></div> <h2 class="svelte-1uha8ag">Gesture-Controlled Audio</h2> <p class="svelte-1uha8ag">Use your hands to control sound in real-time</p> <button class="start-button primary svelte-1uha8ag"> </button> <!></div></div>'),ml=le('<div class="mapping-state svelte-1uha8ag"><span class="mapping-id svelte-1uha8ag"> </span> <div class="mapping-bar svelte-1uha8ag"><div class="mapping-fill svelte-1uha8ag"></div></div> <span class="mapping-value svelte-1uha8ag"> </span></div>'),yl=le('<div class="debug-panel panel svelte-1uha8ag"><h3 class="svelte-1uha8ag">Debug Info</h3> <div class="debug-content svelte-1uha8ag"><p class="svelte-1uha8ag"> </p> <p class="svelte-1uha8ag"> </p> <p class="svelte-1uha8ag"> </p> <hr class="svelte-1uha8ag"/> <h4 class="svelte-1uha8ag">Mapping States</h4> <!></div></div>'),vl=le('<div class="controls-panel panel svelte-1uha8ag"><div class="controls-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Controls</h3> <button class="icon-button svelte-1uha8ag"> </button></div> <div class="controls-content svelte-1uha8ag"><button><span class="button-icon svelte-1uha8ag"> </span> <span class="button-label svelte-1uha8ag"> </span></button> <button class="control-button svelte-1uha8ag"><span class="button-icon svelte-1uha8ag"> </span> <span class="button-label svelte-1uha8ag"> </span></button></div> <div class="gesture-info svelte-1uha8ag"><h4 class="svelte-1uha8ag">Active Gestures</h4> <ul class="gesture-list svelte-1uha8ag"><li class="svelte-1uha8ag"><span class="gesture-name svelte-1uha8ag">Pinch</span> <span class="gesture-desc svelte-1uha8ag">â Filter Cutoff</span></li> <li class="svelte-1uha8ag"><span class="gesture-name svelte-1uha8ag">Hand Height</span> <span class="gesture-desc svelte-1uha8ag">â Volume</span></li> <li class="svelte-1uha8ag"><span class="gesture-name svelte-1uha8ag">Hand Depth</span> <span class="gesture-desc svelte-1uha8ag">â Delay</span></li></ul></div></div> <div class="stats-panel panel svelte-1uha8ag"><div class="stat svelte-1uha8ag"><span class="stat-value svelte-1uha8ag"> </span> <span class="stat-label svelte-1uha8ag">FPS</span></div> <div class="stat svelte-1uha8ag"><span class="stat-value svelte-1uha8ag"> </span> <span class="stat-label svelte-1uha8ag">Hands</span></div></div> <!>',1),_l=le('<div class="container svelte-1uha8ag"><video class="video-feed svelte-1uha8ag" autoplay playsinline=""></video> <canvas class="canvas-overlay svelte-1uha8ag"></canvas> <div class="scan-line svelte-1uha8ag"></div> <div class="ui-overlay svelte-1uha8ag"><header class="header svelte-1uha8ag"><h1 class="title svelte-1uha8ag"><span class="title-icon svelte-1uha8ag">â</span> Hand Audio Controller</h1> <div class="status svelte-1uha8ag"><!></div></header> <!> <!> <footer class="footer svelte-1uha8ag"><p class="svelte-1uha8ag">Move your hands in front of the camera to control audio</p></footer></div></div>',2);function Pl(t,e){t1(e,!0);let s,n,i,r=null,a=null,o=null,h=null,c=Mt(null),l=Mt(null),u=Mt(!1),w=Mt(!1),O=Mt(""),b=Mt(0),C=Mt(!1),et=Mt(!1),mt=Mt(0),st=Mt(e1(new Map)),Pt=Mt(1280),Bt=Mt(720);const yt=async()=>{try{const E=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});return s.srcObject=E,await s.play(),nt(Pt,s.videoWidth,!0),nt(Bt,s.videoHeight,!0),!0}catch(E){return console.error("Camera access failed:",E),nt(O,"Camera access denied. Please allow camera permissions."),!1}},xe=async()=>{if(!(A(u)||A(w))){nt(w,!0),nt(O,"");try{if(!await yt()){nt(w,!1);return}r=new z2({maxHands:2,minDetectionConfidence:.7,minTrackingConfidence:.5}),await r.initialize(),n.width=A(Pt),n.height=A(Bt),a=new q2(n,{},!0),o=new J2(300),nt(l,new il,!0);for(const W of cl())A(l).addMapping(W);h=new ll(500),r.start(s,ht),nt(u,!0),console.log("Hand Audio Controller initialized")}catch(E){console.error("Initialization failed:",E),nt(O,`Initialization failed: ${E instanceof Error?E.message:"Unknown error"}`)}finally{nt(w,!1)}}},Zt=async()=>{var E;if(!((E=A(c))!=null&&E.initialized))try{nt(c,new Z2({bpm:120,masterVolume:.8}),!0),await A(c).initialize(),A(l)&&A(l).setParameterCallback((W,vt,ct)=>{var Wt;(Wt=A(c))==null||Wt.setParameter(W,vt,ct)}),nt(et,!0),console.log("Audio initialized")}catch(W){console.error("Audio initialization failed:",W),nt(O,"Audio initialization failed. Some features may not work.")}},ht=E=>{if(!a||!A(l)||!o)return;h&&nt(b,h.tick(),!0),nt(mt,E.hands.length,!0);const W=A(l).process(E);nt(st,W,!0),a.render(E);for(const ct of E.hands)for(const Wt of an){const fs=ct.landmarks[Wt];Math.random()<.1&&o.emitAtLandmark(fs,A(Pt),A(Bt),!0,1,{color:ct.handedness==="Left"?"#00ffff":"#ff00ff",minLife:10,maxLife:30,speed:1})}o.update();const vt=n.getContext("2d");vt&&o.render(vt)},jt=async()=>{var E;A(c)||await Zt(),await((E=A(c))==null?void 0:E.togglePlayback())};Oc(()=>()=>{var E;r==null||r.destroy(),(E=A(c))==null||E.destroy(),a==null||a.reset(),s!=null&&s.srcObject&&s.srcObject.getTracks().forEach(vt=>vt.stop())});var Re=_l();p1("1uha8ag",E=>{var W=ul();n1(()=>{i1.title="Hand Audio Controller"}),te(E,W)});var Rn=M(Re);Rn.muted=!0,Kn(Rn,E=>s=E,()=>s);var Dr=K(Rn,2);Kn(Dr,E=>n=E,()=>n);var Or=K(Dr,4),Nn=M(Or),Ur=K(M(Nn),2),lc=M(Ur);{var uc=E=>{var W=fl();Be(2),te(E,W)},fc=E=>{var W=dl();Be(2),te(E,W)};gs(lc,E=>{A(u)?E(uc):E(fc,!1)})}k(Ur),k(Nn);var Br=K(Nn,2);{var dc=E=>{var W=gl(),vt=M(W),ct=K(M(vt),6);ct.__click=xe;var Wt=M(ct,!0);k(ct);var fs=K(ct,2);{var Ns=Qt=>{var Ne=pl(),ds=M(Ne,!0);k(Ne),ps(()=>lt(ds,A(O))),te(Qt,Ne)};gs(fs,Qt=>{A(O)&&Qt(Ns)})}k(vt),k(W),ps(()=>{ct.disabled=A(w),lt(Wt,A(w)?"Initializing...":"Start Experience")}),te(E,W)};gs(Br,E=>{A(u)||E(dc)})}var pc=K(Br,2);{var gc=E=>{var W=vl(),vt=r1(W),ct=M(vt),Wt=K(M(ct),2);Wt.__click=()=>nt(C,!A(C));var fs=M(Wt,!0);k(Wt),k(ct);var Ns=K(ct,2),Qt=M(Ns);let Ne;Qt.__click=Zt;var ds=M(Qt),mc=M(ds,!0);k(ds);var Gr=K(ds,2),yc=M(Gr,!0);k(Gr),k(Qt);var Ds=K(Qt,2);Ds.__click=jt;var Dn=M(Ds),vc=M(Dn,!0);k(Dn);var Vr=K(Dn,2),_c=M(Vr,!0);k(Vr),k(Ds),k(Ns),Be(2),k(vt);var On=K(vt,2),Un=M(On),Hr=M(Un),wc=M(Hr,!0);k(Hr),Be(2),k(Un);var zr=K(Un,2),jr=M(zr),bc=M(jr,!0);k(jr),Be(2),k(zr),k(On);var Ec=K(On,2);{var Ac=De=>{var Oe=yl(),Wr=K(M(Oe),2),Bn=M(Wr),Tc=M(Bn);k(Bn);var Gn=K(Bn,2),xc=M(Gn);k(Gn);var Vn=K(Gn,2),Pc=M(Vn);k(Vn);var Mc=K(Vn,6);u1(Mc,17,()=>Array.from(A(st).entries()),c1,(Ue,kc)=>{var Kr=a1(()=>o1(A(kc),2));let Ic=()=>A(Kr)[0],Xr=()=>A(Kr)[1];var Hn=ml(),zn=M(Hn),Cc=M(zn,!0);k(zn);var jn=K(zn,2),Sc=M(jn);k(jn);var Yr=K(jn,2),Lc=M(Yr,!0);k(Yr),k(Hn),ps((Fc,Rc)=>{lt(Cc,Ic()),v1(Sc,`width: ${Fc??""}%`),lt(Lc,Rc)},[()=>Math.min(100,Xr().outputValue*100),()=>Xr().outputValue.toFixed(2)]),te(Ue,Hn)}),k(Wr),k(Oe),ps(Ue=>{lt(Tc,`Video: ${A(Pt)??""}Ã${A(Bt)??""}`),lt(xc,`Audio: ${A(et)?"Enabled":"Disabled"}`),lt(Pc,`Mappings: ${Ue??""}`)},[()=>{var Ue;return((Ue=A(l))==null?void 0:Ue.getMappings().length)??0}]),te(De,Oe)};gs(Ec,De=>{A(C)&&De(Ac)})}ps(()=>{var De,Oe;lt(fs,A(C)?"â":"â"),Ne=y1(Qt,1,"control-button svelte-1uha8ag",null,Ne,{active:A(et)}),lt(mc,A(et)?"ð":"ð"),lt(yc,A(et)?"Audio On":"Enable Audio"),Ds.disabled=!A(et),lt(vc,(De=A(c))!=null&&De.playing?"â¸":"â¶"),lt(_c,(Oe=A(c))!=null&&Oe.playing?"Pause":"Play"),lt(wc,A(b)),lt(bc,A(mt))}),te(E,W)};gs(pc,E=>{A(u)&&E(gc)})}Be(2),k(Or),k(Re),Kn(Re,E=>i=E,()=>i),te(t,Re),s1()}h1(["click"]);export{Pl as component};
